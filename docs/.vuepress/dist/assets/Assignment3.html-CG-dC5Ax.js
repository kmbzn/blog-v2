import{_ as a,c as e,a as n,o as l}from"./app-roWsHDGr.js";const i={};function t(p,s){return l(),e("div",null,[...s[0]||(s[0]=[n('<h1 id="implementing-augmented-b-tree" tabindex="-1"><a class="header-anchor" href="#implementing-augmented-b-tree"><span>Implementing Augmented B+tree</span></a></h1><ul><li>이번 과제의 목표: 다음 두 가지 B+ tree 구현</li></ul><ol><li>Normal B+ tree</li></ol><ul><li>강의 및 실습에서 다룬 기능을 가진 B+ tree 구현</li></ul><ol start="2"><li>Logical Deletion Applied B+ tree</li></ol><ul><li>레코드 삭제 쿼리 시, 실제 삭제 대신 &#39;삭제됨&#39;으로 표시</li><li>해당 레코드는 검색되지 않아야 함</li><li>B+tree application 종료 시, 실제 레코드 삭제 및 남은 레코드로 B+tree 재구성</li><li>실제 레코드 삭제 및 B+tree 재구성을 위한 효율적인 방법 고안 및 구현</li></ul><h2 id="disk-based-b-tree" tabindex="-1"><a class="header-anchor" href="#disk-based-b-tree"><span>Disk-based B+tree</span></a></h2><ul><li>B+ tree의 노드 하나를 한 페이지(4KB)에 저장하는 방식으로 B+ tree 전체를 한 파일에 저장</li><li>파일은 Disk에 저장되므로, B+tree management 프로그램이 종료되어도 B+tree 구조와 내용 유지</li><li>Data file은 Header Page, Internal Page, Leaf Page, Free Page 등으로 구성됨 (슬라이드 4 다이어그램 참조)</li></ul><h2 id="specification" tabindex="-1"><a class="header-anchor" href="#specification"><span>Specification</span></a></h2><ul><li><code>main.c</code>는 다음 기능을 수행하도록 구현됨 <ul><li><code>open</code>: <code>pathname</code>을 사용하여 기존 data file을 열거나, 없으면 새로 생성. (이후 command 처리)</li><li><code>insert &lt;key&gt; &lt;value&gt;</code>: &#39;key/value&#39; (record)를 data file의 올바른 위치에 삽입 (중복 key 불가)</li><li><code>find &lt;key&gt;</code>: 입력 &#39;key&#39;를 포함하는 record를 찾아 일치하는 &#39;value&#39; 반환</li><li><code>delete &lt;key&gt;</code>: 일치하는 record를 찾아 발견 시 삭제</li></ul></li><li><code>libbpt.a</code> 라이브러리는 다음 API service 제공 <ul><li><code>int open_table (char *pathname);</code> (이미 구현됨) <ul><li>Data file 열기/생성, 성공 시 unique <code>table_id</code> 반환, 실패 시 음수 반환</li></ul></li><li><code>int db_insert (int64_t key, char * value);</code><ul><li>&#39;key/value&#39; record 삽입, 성공 시 0, 실패 시 non-zero 반환</li></ul></li><li><code>char* db_find (int64_t key);</code><ul><li>&#39;key&#39;를 포함하는 record 검색</li><li>(설명) 일치 &#39;key&#39; 발견 시, <code>ret_val</code>에 &#39;value&#39; 문자열 저장 후 0 반환</li><li>(설명) 실패 시 non-zero 값 반환</li></ul></li><li><code>int db_delete (int64_t key);</code><ul><li>일치 record 삭제, 성공 시 0, 실패 시 non-zero 반환</li></ul></li></ul></li><li>모든 update operation (<code>insert</code> / <code>delete</code>)은 operation unit으로 data file에 적용되어야 함</li><li>다른 학생의 data file과도 호환되어야 하므로 data file layout 준수</li><li>On-disk page size: <code>4096 Bytes</code> (고정)</li><li>Record (key + value) size: <code>128 Bytes</code> (<code>8B</code> key + <code>120B</code> value) (고정)</li><li>Page 종류: Header, Free, Leaf, Internal</li><li>Header Page (Offset <code>0</code>-<code>4095</code>) <ul><li>Metadata 포함</li><li>Free page number [0-7]: 첫 free page (없으면 <code>0</code>)</li><li>Root page number [8-15]: Root page 위치</li><li>Number of pages [16-23]: 총 페이지 수</li></ul></li><li>Free Page <ul><li>Free page list로 연결 (Header page가 head)</li><li>Next Free Page Number [0-7]</li></ul></li><li>Page Header (Leaf/Internal 공통, <code>128</code> Bytes) <ul><li>(<code>include/bpt.h</code>의 <code>node</code> structure 참조)</li><li>Parent page number [0-7]</li><li>Is Leaf [8-11]: (<code>0</code>: Internal, <code>1</code>: Leaf)</li><li>Number of keys [12-15]</li></ul></li><li>Leaf Page <ul><li>Key/value record 포함 (key 정렬됨)</li><li>예: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mn>1</mn></msub><msub><mi>v</mi><mn>1</mn></msub><mtext> </mtext><mo separator="true">,</mo><msub><mi>k</mi><mn>2</mn></msub><msub><mi>v</mi><mn>2</mn></msub><mtext> </mtext><mo separator="true">,</mo><mo>…</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>k</mi><mn>31</mn></msub><msub><mi>v</mi><mn>31</mn></msub></mrow><annotation encoding="application/x-tex">k_1 v_1~, k_2 v_2~, \\dots~, k_{31} v_{31}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace nobreak"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li>Record 128B, Page 당 최대 <code>31</code>개 record (Order <code>32</code>)</li><li>Page Header 내 [120-127]: Right Sibling Page Number (가장 오른쪽은 <code>0</code>)</li></ul></li><li>Internal Page <ul><li>120B value 대신 8B page number (internal 또는 leaf) 저장</li><li>Page Header 내 [120-127]: One More Page Number (추가 page number)</li><li>Branching factor (order) = 249 (최대 248 entries, (4096 - 128) / (8+8) = 248)</li><li>Key 범위 해석 예: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>&lt;</mo><msub><mi>k</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">A &lt; k_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mn>1</mn></msub><mo>≤</mo><mi>B</mi><mo>&lt;</mo><msub><mi>k</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">k_1 \\le B &lt; k_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>…</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>k</mi><mi>n</mi></msub><mo>≤</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">\\dots~, k_n \\le X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="minner">…</span><span class="mspace nobreak"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></li></ul></li></ul><h2 id="specification-logical-deletion-applied-b-tree" tabindex="-1"><a class="header-anchor" href="#specification-logical-deletion-applied-b-tree"><span>Specification (Logical Deletion Applied B+ tree)</span></a></h2><ul><li><code>db_reorganize()</code> 함수 구현 필요</li><li><code>bptree2/main.c</code>의 <code>switch-case</code> 문 &#39;q&#39; case 내부에서 호출됨</li><li><code>bpt.h</code>에 선언하고 <code>bpt.c</code>에 정의</li><li>필요한 input parameters는 자유롭게 정의 가능</li><li><code>db_reorganize</code> 함수의 점수는 performance에 따라 달라지며, 실행 속도가 빠를수록 높은 점수 획득</li><li>Logical Deletion B+ tree의 Leaf Page: <ul><li>Reserved space를 삭제된 record 표시에 활용 가능</li><li>Page layout alignment (전체 페이지 크기, record 시작 offset 등)에 유의</li></ul></li></ul><h2 id="specification-1" tabindex="-1"><a class="header-anchor" href="#specification-1"><span>Specification</span></a></h2><ul><li>제공된 링크의 repository를 사용하여 과제 수행 후 github에 push</li><li><code>bptree1</code> 폴더: Normal B+ tree 구현</li><li><code>bptree2</code> 폴더: Logical deletion applied B+ tree 구현</li><li><code>README.md</code> 파일에 학번과 이름 반드시 기입</li><li>Github repository 이름: <code>Assignment3_[학번]</code></li><li>Wiki는 LMS 과제 탭에 <code>assignment3_[학번]_[이름].pdf</code> 파일로 제출</li><li>제출 기한: 2025년 11월 20일 23시 59분</li><li>지연 제출 시 3시간마다 전체 득점에서 5% 감점 (예: 1분~3시간 지연 시 95점부터 시작)</li><li>제출 기한 60시간 이후 제출 시 0점</li><li>Assignment 3 Quiz는 11월 21일 실시 예정 (변경 시 공지)</li><li><code>Makefile</code>은 절대 수정 금지</li><li><code>main.c</code>의 <code>open_table</code> 인자를 &quot;test.db&quot;에서 &quot;DB[학번].db&quot;로 수정하여 제출</li><li><code>main.c</code>의 다른 부분은 절대 수정 금지</li><li><code>bpt.c</code>에 적절한 내용을 추가/수정하여 과제 수행</li><li>제공된 Disk read/write API 활용 가능</li><li>과제 수행에 필요한 다른 함수는 직접 정의하여 사용</li><li>Normal B+ tree 구현 코드를 Logical Deletion Applied B+ tree에 활용 가능</li><li>제공된 in-memory B+tree 코드를 참고</li></ul><h2 id="judging-system" tabindex="-1"><a class="header-anchor" href="#judging-system"><span>Judging System</span></a></h2><ul><li>채점 환경 (Default Version) <ul><li><code>gcc (Ubuntu 11.4.0-1ubuntu1~22.04.1) 11.4.0</code></li><li><code>GNU Make 4.3</code></li></ul></li><li>Version 차이로 인한 문제는 <strong>책임지지 않음</strong></li><li>빌드 또는 실행이 되지 않을 경우 <strong>0점</strong> 처리</li><li>과제 수행 시 최대 메모리 사용량을 <code>1MiB</code>로 제한</li><li>메모리 사용량이 <code>1MiB</code>를 초과하는 경우 <strong>큰 감점 부여</strong> 가능</li></ul><h2 id="submit" tabindex="-1"><a class="header-anchor" href="#submit"><span>Submit</span></a></h2><ul><li>Code <ul><li>Completeness: 명세의 요구 조건을 모두 올바르게 구현</li><li>Defensiveness: 발생 가능한 예외 상황에 대처</li><li>Comment: 코드에 <strong>반드시</strong> 주석 포함</li></ul></li><li>Wiki <ul><li>Design: 요구 조건 구현 계획, 자료구조, 알고리즘, 이론 적용 방식 서술</li><li>Implement: 새롭게 구현/수정한 부분의 목적과 기존과의 차이점 서술 (코드 복사 금지)</li><li>Result: 정상 동작 실행 결과 첨부 및 동작 과정 설명</li><li>Trouble shooting: 과제 수행 중 겪은 문제와 해결 과정 서술 (미해결 시, 문제 내용과 해결 시도 서술)</li><li><code>db_reorganize</code>에 대한 고찰: <code>db_reorganize</code> 성능 향상을 위해 고안한 내용 상세 서술</li></ul></li></ul>',18)])])}const c=a(i,[["render",t]]),r=JSON.parse('{"path":"/db/Assignment3.html","title":"Implementing Augmented B+tree","lang":"ko-KR","frontmatter":{},"git":{"updatedTime":1763149723000,"contributors":[{"name":"kmbzn","username":"kmbzn","email":"kmbzn24@gmail.com","commits":1,"url":"https://github.com/kmbzn"}],"changelog":[{"hash":"6120a63360466143831636b40c0f1ff3226d9d3e","time":1763149723000,"email":"kmbzn24@gmail.com","author":"kmbzn","message":"Refactor code structure for improved readability and maintainability"}]},"filePathRelative":"db/Assignment3.md"}');export{c as comp,r as data};
