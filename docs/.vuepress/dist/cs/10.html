<!doctype html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><meta property="og:description" content="KeyBaseZone"><meta property="og:image" content="https://kmbzn.com/images/og.png"><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/android-chrome-192x192.png"><link rel="icon" type="image/png" sizes="512x512" href="/images/android-chrome-512x512.png"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/victor-mono@latest/dist/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.css"><title>10. String Security</title><meta name="description" content="Summarizing key concepts from CS lectures.">
    <link rel="preload" href="/assets/style-BG_NtY9z.css" as="style"><link rel="stylesheet" href="/assets/style-BG_NtY9z.css">
    <link rel="modulepreload" href="/assets/app-DYuS003L.js"><link rel="modulepreload" href="/assets/10.html-tIhXVNlZ.js">
    <link rel="prefetch" href="/assets/Mindscape.html-BZrAXGQ_.js" as="script"><link rel="prefetch" href="/assets/Musics.html-TsZj5LC_.js" as="script"><link rel="prefetch" href="/assets/index.html-aKKwu_q-.js" as="script"><link rel="prefetch" href="/assets/test.html-DYeg6o8b.js" as="script"><link rel="prefetch" href="/assets/1018.html-C0grs92m.js" as="script"><link rel="prefetch" href="/assets/1966.html-CPcQn8jT.js" as="script"><link rel="prefetch" href="/assets/aloha6.html-DF20pZpg.js" as="script"><link rel="prefetch" href="/assets/pytimeout.html-DiDpluO5.js" as="script"><link rel="prefetch" href="/assets/stdvector.html-DrkEXq8i.js" as="script"><link rel="prefetch" href="/assets/vim.html-BarKWx8p.js" as="script"><link rel="prefetch" href="/assets/1-Course-Intro.html-CuQrLzOS.js" as="script"><link rel="prefetch" href="/assets/10-Character-Animation.html-BDb5cPea.js" as="script"><link rel="prefetch" href="/assets/11-Curves.html-DVVBtToW.js" as="script"><link rel="prefetch" href="/assets/12-More-Lighting-Texture.html-CpItm0Ha.js" as="script"><link rel="prefetch" href="/assets/2-Rendering-Basics.html-DIDWUpS2.js" as="script"><link rel="prefetch" href="/assets/3-Transformations.html-DbiosNjw.js" as="script"><link rel="prefetch" href="/assets/4-Affine-Space-Frame_Matrix.html-DGNJ-Q2a.js" as="script"><link rel="prefetch" href="/assets/5-Vertex-Processing-1.html-BAhCpsVA.js" as="script"><link rel="prefetch" href="/assets/6-Vertex-Processing-2.html-D6WwwGFG.js" as="script"><link rel="prefetch" href="/assets/7-Hierachical-Modeling-Mesh.html-CMgBYN8u.js" as="script"><link rel="prefetch" href="/assets/8-Lighting.html-BT7W02Yn.js" as="script"><link rel="prefetch" href="/assets/9-Orientation-Rotation.html-BpuvsZ7K.js" as="script"><link rel="prefetch" href="/assets/Project-2.html-BQ55Hyja.js" as="script"><link rel="prefetch" href="/assets/Project-3.html-CzDyu6p0.js" as="script"><link rel="prefetch" href="/assets/1.html-Dyzhhc1s.js" as="script"><link rel="prefetch" href="/assets/2.html-BURRHwK6.js" as="script"><link rel="prefetch" href="/assets/24midterm.html-B4Knr8Gi.js" as="script"><link rel="prefetch" href="/assets/3.html-Czj0Uh02.js" as="script"><link rel="prefetch" href="/assets/4.html-BLubXxEv.js" as="script"><link rel="prefetch" href="/assets/5.html-DE1FayID.js" as="script"><link rel="prefetch" href="/assets/6.html-BOtCgq2Q.js" as="script"><link rel="prefetch" href="/assets/7.html--a8D2jBg.js" as="script"><link rel="prefetch" href="/assets/8.html-B7Sxd1_S.js" as="script"><link rel="prefetch" href="/assets/9.html-C0YcbNnp.js" as="script"><link rel="prefetch" href="/assets/final.html-Bt0kLxfM.js" as="script"><link rel="prefetch" href="/assets/tmp.html-CnhX06lU.js" as="script"><link rel="prefetch" href="/assets/wiki.html-Bp-7gavy.js" as="script"><link rel="prefetch" href="/assets/Bitcoin.html-DZblXBJU.js" as="script"><link rel="prefetch" href="/assets/4.html-BwjWzEd9.js" as="script"><link rel="prefetch" href="/assets/5.html-DEfs4OS9.js" as="script"><link rel="prefetch" href="/assets/6.html-BXEJCYlM.js" as="script"><link rel="prefetch" href="/assets/1.html-x26MLAFg.js" as="script"><link rel="prefetch" href="/assets/10.html-D8kfhpY2.js" as="script"><link rel="prefetch" href="/assets/11.html-CHuQWyk5.js" as="script"><link rel="prefetch" href="/assets/12.html-Bpe8nr8X.js" as="script"><link rel="prefetch" href="/assets/15.html-BjT8ta0U.js" as="script"><link rel="prefetch" href="/assets/16.html-X5Dk6xzD.js" as="script"><link rel="prefetch" href="/assets/17.html-DdxWWHWv.js" as="script"><link rel="prefetch" href="/assets/2.html-B_KTdSg9.js" as="script"><link rel="prefetch" href="/assets/20.html-48slOdKH.js" as="script"><link rel="prefetch" href="/assets/21.html-DxaJbnyM.js" as="script"><link rel="prefetch" href="/assets/24.html-BVCgJfjb.js" as="script"><link rel="prefetch" href="/assets/25.html-Dhew061A.js" as="script"><link rel="prefetch" href="/assets/26.html-yPjc8pbH.js" as="script"><link rel="prefetch" href="/assets/27.html-u-FNmQzO.js" as="script"><link rel="prefetch" href="/assets/3.html-ZRC8GPzy.js" as="script"><link rel="prefetch" href="/assets/4.html-DMwL5L7D.js" as="script"><link rel="prefetch" href="/assets/5.html-IEJQXOq4.js" as="script"><link rel="prefetch" href="/assets/6.html-YDMNkYhK.js" as="script"><link rel="prefetch" href="/assets/7.html-CGfmzXJX.js" as="script"><link rel="prefetch" href="/assets/8.html-DAeCQu75.js" as="script"><link rel="prefetch" href="/assets/9.html-BeeGPhtK.js" as="script"><link rel="prefetch" href="/assets/midterm.html-B892UqjE.js" as="script"><link rel="prefetch" href="/assets/Nordvik.html-Z-gKzIf0.js" as="script"><link rel="prefetch" href="/assets/NorthSentinelIsland.html-Bed44bIS.js" as="script"><link rel="prefetch" href="/assets/Rongorongo.html-CWHLx-x-.js" as="script"><link rel="prefetch" href="/assets/1.html-DKf9pYfY.js" as="script"><link rel="prefetch" href="/assets/13.html-BW6-zyMh.js" as="script"><link rel="prefetch" href="/assets/14.html-Xv1Lfzfa.js" as="script"><link rel="prefetch" href="/assets/15.html-7-ahiFtg.js" as="script"><link rel="prefetch" href="/assets/16.html-BJvbId2b.js" as="script"><link rel="prefetch" href="/assets/17.html-Df5d2Si9.js" as="script"><link rel="prefetch" href="/assets/18.html-B1UN8Bey.js" as="script"><link rel="prefetch" href="/assets/19.html-Br5jVkAh.js" as="script"><link rel="prefetch" href="/assets/2.html-Bgh16wh8.js" as="script"><link rel="prefetch" href="/assets/2021024057.html-C5z4GMrF.js" as="script"><link rel="prefetch" href="/assets/3.html-6yP1GQaU.js" as="script"><link rel="prefetch" href="/assets/6.html-2TsFEYX_.js" as="script"><link rel="prefetch" href="/assets/7-1.html-DFF59QA7.js" as="script"><link rel="prefetch" href="/assets/7-2.html-DTwmke6o.js" as="script"><link rel="prefetch" href="/assets/Assignment2-1.html-DwBzKOVw.js" as="script"><link rel="prefetch" href="/assets/Assignment2-2.html-0r5iOWEe.js" as="script"><link rel="prefetch" href="/assets/Assignment3.html-ClsVVdpz.js" as="script"><link rel="prefetch" href="/assets/LAB06.html-DaJ7nodH.js" as="script"><link rel="prefetch" href="/assets/LAB08.html-mnhSuDhO.js" as="script"><link rel="prefetch" href="/assets/bpt.html-CsJITgod.js" as="script"><link rel="prefetch" href="/assets/final.html-DgNl9UdO.js" as="script"><link rel="prefetch" href="/assets/finalnote.html-DO9JWlNT.js" as="script"><link rel="prefetch" href="/assets/wiki-4.html-DdEtVlTO.js" as="script"><link rel="prefetch" href="/assets/wiki.html-CPCkcHqU.js" as="script"><link rel="prefetch" href="/assets/10.html-Cu32aae5.js" as="script"><link rel="prefetch" href="/assets/11.html-Cn7rBo2F.js" as="script"><link rel="prefetch" href="/assets/12.html-22A-sNBc.js" as="script"><link rel="prefetch" href="/assets/13.html-CgVOigAo.js" as="script"><link rel="prefetch" href="/assets/14.html-od_rCsC8.js" as="script"><link rel="prefetch" href="/assets/7.html-G9EIOF80.js" as="script"><link rel="prefetch" href="/assets/8.html-DHum2OOk.js" as="script"><link rel="prefetch" href="/assets/9.html-lVepTlCU.js" as="script"><link rel="prefetch" href="/assets/Project-2-test-code.html-Dy1d2Qsd.js" as="script"><link rel="prefetch" href="/assets/Project-2.html-Dbk9Hexk.js" as="script"><link rel="prefetch" href="/assets/Project-3-ko.html-D1io_K9s.js" as="script"><link rel="prefetch" href="/assets/Project-3-wiki.html-CA9rAQCO.js" as="script"><link rel="prefetch" href="/assets/Project-3.html-C9qj04Kz.js" as="script"><link rel="prefetch" href="/assets/clipboard_image_kakaotalk_ubuntu.html-DtVmVhoX.js" as="script"><link rel="prefetch" href="/assets/wiki.html-CDjwxis-.js" as="script"><link rel="prefetch" href="/assets/ExtraVirginOliveOil.html-BsXGdaAX.js" as="script"><link rel="prefetch" href="/assets/PsylliumHusk.html-BtEx1B9L.js" as="script"><link rel="prefetch" href="/assets/10.html-DwJMDu0H.js" as="script"><link rel="prefetch" href="/assets/11.html-BybrhFam.js" as="script"><link rel="prefetch" href="/assets/12.html-Tne4rI2u.js" as="script"><link rel="prefetch" href="/assets/13.html-ZyFv5UVp.js" as="script"><link rel="prefetch" href="/assets/14.html-C8E7Wqia.js" as="script"><link rel="prefetch" href="/assets/15.html-DZaxPvm4.js" as="script"><link rel="prefetch" href="/assets/16.html-ysUSl8JE.js" as="script"><link rel="prefetch" href="/assets/17.html-BD4eTzr1.js" as="script"><link rel="prefetch" href="/assets/2.html-C72onzQq.js" as="script"><link rel="prefetch" href="/assets/2022-final.html-BRHsThu9.js" as="script"><link rel="prefetch" href="/assets/2023-final.html--trdSTK2.js" as="script"><link rel="prefetch" href="/assets/2024-final.html-DaPGwIjY.js" as="script"><link rel="prefetch" href="/assets/3.html-DikfqjHi.js" as="script"><link rel="prefetch" href="/assets/4.html-D3ftjhFG.js" as="script"><link rel="prefetch" href="/assets/5.html-CKA9bxlA.js" as="script"><link rel="prefetch" href="/assets/6.html-DXozICRj.js" as="script"><link rel="prefetch" href="/assets/7.html-DHNLLSKW.js" as="script"><link rel="prefetch" href="/assets/8.html-DBaG9rBR.js" as="script"><link rel="prefetch" href="/assets/9.html-B1a4gly7.js" as="script"><link rel="prefetch" href="/assets/wiki-2.html-DpFx6KA_.js" as="script"><link rel="prefetch" href="/assets/wiki.html-D8PFfB4O.js" as="script"><link rel="prefetch" href="/assets/404.html-B9X1saow.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/images/kbz.png" alt><!----></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><!----><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/Mindscape.html" aria-label="Mindscape ğŸ”¥"><!--[--><!--[--><!--]--><!--]-->Mindscape ğŸ”¥<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Musics.html" aria-label="Playlist ğŸ§"><!--[--><!--[--><!--]--><!--]-->Playlist ğŸ§<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ¤– Artificial Intelligence <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/ai/15.html" aria-label="15. Linear Models (2)"><!--[--><!--[--><!--]--><!--]-->15. Linear Models (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/16.html" aria-label="16. Other Classic ML Models (1)"><!--[--><!--[--><!--]--><!--]-->16. Other Classic ML Models (1)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/17.html" aria-label="17. Other Classic ML Models (2)"><!--[--><!--[--><!--]--><!--]-->17. Other Classic ML Models (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/20.html" aria-label="20. Neural Networks and Deep Learning (2)"><!--[--><!--[--><!--]--><!--]-->20. Neural Networks and Deep Learning (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/21.html" aria-label="21. Neural Networks and Deep Learning (3)"><!--[--><!--[--><!--]--><!--]-->21. Neural Networks and Deep Learning (3)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/24.html" aria-label="24. Convolutional Neural Networks"><!--[--><!--[--><!--]--><!--]-->24. Convolutional Neural Networks<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/25.html" aria-label="25. Language Modeling and Recurrent Neural Networks"><!--[--><!--[--><!--]--><!--]-->25. Language Modeling and Recurrent Neural Networks<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/26.html" aria-label="26. Attention Mechanism and Self-Attention"><!--[--><!--[--><!--]--><!--]-->26. Attention Mechanism and Self-Attention<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/27.html" aria-label="27. Transformers"><!--[--><!--[--><!--]--><!--]-->27. Transformers<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ—‚ï¸ Database System <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/db/1.html" aria-label="1. Introduction"><!--[--><!--[--><!--]--><!--]-->1. Introduction<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/2.html" aria-label="2. Relational Model"><!--[--><!--[--><!--]--><!--]-->2. Relational Model<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/3.html" aria-label="3. SQL"><!--[--><!--[--><!--]--><!--]-->3. SQL<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/6.html" aria-label="6. E-R Model"><!--[--><!--[--><!--]--><!--]-->6. E-R Model<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/7-1.html" aria-label="7. Relational Database Design (1)"><!--[--><!--[--><!--]--><!--]-->7. Relational Database Design (1)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/7-2.html" aria-label="7. Relational Database Design (2)"><!--[--><!--[--><!--]--><!--]-->7. Relational Database Design (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/13.html" aria-label="13. Data Storage Structures"><!--[--><!--[--><!--]--><!--]-->13. Data Storage Structures<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/14.html" aria-label="14. Indexing"><!--[--><!--[--><!--]--><!--]-->14. Indexing<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/15.html" aria-label="15. Query Processing"><!--[--><!--[--><!--]--><!--]-->15. Query Processing<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/16.html" aria-label="16. Query Optimization"><!--[--><!--[--><!--]--><!--]-->16. Query Optimization<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/17.html" aria-label="17. Transactions"><!--[--><!--[--><!--]--><!--]-->17. Transactions<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/18.html" aria-label="18. Concurrency Control"><!--[--><!--[--><!--]--><!--]-->18. Concurrency Control<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/19.html" aria-label="19. Recovery System"><!--[--><!--[--><!--]--><!--]-->19. Recovery System<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page" data-v-e24f0054><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="_10-string-security" tabindex="-1"><a class="header-anchor" href="#_10-string-security"><span>10. String Security</span></a></h1><h1 id="strings" tabindex="-1"><a class="header-anchor" href="#strings"><span>Strings</span></a></h1><h2 id="character-strings" tabindex="-1"><a class="header-anchor" href="#character-strings"><span>Character Strings</span></a></h2><ul><li>í‘œì¤€ C ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§€ì› <ul><li><code>char</code> íƒ€ì…ì˜ strings</li><li><code>wchar_t</code> íƒ€ì…ì˜ wide strings</li></ul></li></ul><blockquote><p><strong>Figure 2.1.</strong> &quot;hello&quot;ì˜ ë¬¸ìì—´ í‘œí˜„ <img src="/assets/image-18-B47nrp2D.png" alt=""></p></blockquote><h2 id="an-example" tabindex="-1"><a class="header-anchor" href="#an-example"><span>An Example</span></a></h2><ul><li>size of an array</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">dowork</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">int</span> dis<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">clear</span><span class="token punctuation">(</span>dis<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">/* ... */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="multibyte-character-set" tabindex="-1"><a class="header-anchor" href="#multibyte-character-set"><span>multibyte character set</span></a></h2><ul><li>Basic execution character set <ul><li>26ê°œì˜ ëŒ€ë¬¸ì, 26ê°œì˜ ì†Œë¬¸ì ë“±</li></ul></li><li>UTF-8 <ul><li>A multibyte character set</li><li>Backward compatible</li><li>1 ~ 4 bytes</li></ul></li><li>String literals <ul><li><code>L&quot;xyz&quot;</code></li><li>Type <code>wchar_t</code></li></ul></li></ul><h2 id="strings-1" tabindex="-1"><a class="header-anchor" href="#strings-1"><span>Strings</span></a></h2><ul><li><code>const char s[3] = &quot;abc&quot;;</code><ul><li>Arrayì˜ í¬ê¸°ëŠ” 3</li><li>Trailing null byteëŠ” ìƒëµ</li><li><code>const char s[ ] = &quot;abc&quot;;</code></li></ul></li></ul><h2 id="strings-in-c" tabindex="-1"><a class="header-anchor" href="#strings-in-c"><span>Strings in C++</span></a></h2><ul><li><code>std::basic_string</code><ul><li>Charactersì˜ ì‹œí€€ìŠ¤</li><li><code>string</code>ì€ template specialization <code>basic_string&lt;char&gt;</code>ì— ëŒ€í•œ typedef</li><li><code>wstring</code>ì€ template specialization <code>basic_string&lt;wchar_t&gt;</code>ì— ëŒ€í•œ typedef</li></ul></li><li>C++ string class <ul><li>ëª¨ë“  ì¼ë°˜ì ì¸ implementationì€ null-terminated</li><li>Win32 <code>LSA_UNICODE_STRING</code>ê³¼ ê°™ì€ ì¼ë¶€ ë‹¤ë¥¸ string typeì€ null-terminatedì¼ í•„ìš”ëŠ” ì—†ìŒ.</li></ul></li></ul><h2 id="character-types" tabindex="-1"><a class="header-anchor" href="#character-types"><span>Character Types</span></a></h2><ul><li>three types <ul><li><code>char</code>, <code>signed char</code>, <code>unsigned char</code></li></ul></li><li>Philosophy <ul><li>Signed char and unsigned char <ul><li>ì‘ì€ ì •ìˆ˜ê°’ì— ì í•©</li></ul></li><li>Plain char <ul><li>ë¬¸ìì—´ ë¦¬í„°ëŸ´ì˜ ê°ê° ìš”ì†Œë“¤ì˜ íƒ€ì…</li><li>ì •ìˆ˜ ë°ì´í„° ëŒ€ì‹  ë¬¸ì(character) ë°ì´í„°ë¥¼ ìœ„í•´ ì‚¬ìš© (ë¶€í˜¸ì˜ ì˜ë¯¸ê°€ ì ì€)</li></ul></li></ul></li><li>Example</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token class-name">size_t</span> len<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">char</span> cstr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;char string&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">signed</span> <span class="token keyword">char</span> scstr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;signed char string&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">unsigned</span> <span class="token keyword">char</span> ucstr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;unsigned char string&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>cstr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>scstr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* warns when char is unsigned */</span></span>
<span class="line">len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>ucstr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* warns when char is signed */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="int" tabindex="-1"><a class="header-anchor" href="#int"><span><code>int</code></span></a></h2><ul><li><code>EOF</code> (ìŒìˆ˜ ê°’)</li><li>ë˜ëŠ” <code>unsigned char</code>ë¡œ í•´ì„ëœ <code>char data</code></li><li><code>int</code>ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ <ul><li><code>fgetc()</code>, <code>getc()</code>, <code>getchar()</code>, <code>fgetwc()</code>, <code>getwc()</code>, <code>getwchar()</code></li></ul></li><li><code>&lt;ctype.h&gt;</code>ì— ì„ ì–¸ëœ char classification functions <ul><li><code>int</code>ë¥¼ ì¸ìˆ˜ë¡œ í—ˆìš©</li><li>ì˜ˆ: <code>isalpha()</code></li></ul></li></ul><h2 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h2><ul><li>Code Example ë¶„ì„<div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">char</span> b<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> â€œaâ€<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">wchar_t</span> wc<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; size of &#39;a&#39;: %d \n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token char">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; size of c: %d \n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot; size of wc: %d \n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>wc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>Cì—ì„œ sizeof(&#39;a&#39;) â†’ ???, sizeof(c) â†’ ???</li><li>C++ì—ì„œ sizeof(&#39;a&#39;) â†’ ???</li></ul><h2 id="unsigned-char" tabindex="-1"><a class="header-anchor" href="#unsigned-char"><span>unsigned char</span></a></h2><ul><li>ê°ì²´ê°€ ì–´ë–¤ typeì´ë“  ë  ìˆ˜ ìˆì„ ë•Œ ìœ ìš©</li><li><code>fwrite()</code></li><li>Pure binary notationì„ ì‚¬ìš©í•˜ì—¬ í‘œí˜„ë¨ì´ ë³´ì¥</li><li>Example</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">unsigned</span> <span class="token keyword">char</span> buf1<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0xff</span><span class="token punctuation">,</span> <span class="token number">0x56</span><span class="token punctuation">,</span> <span class="token number">0x78</span><span class="token punctuation">,</span> <span class="token number">0xfa</span><span class="token punctuation">,</span> <span class="token number">0xf1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">unsigned</span> <span class="token keyword">char</span> buf2<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    FILE <span class="token operator">*</span>stream<span class="token punctuation">;</span></span>
<span class="line">    stream <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span>â€œout<span class="token punctuation">.</span>datâ€<span class="token punctuation">,</span> â€œwbâ€<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fwrite</span><span class="token punctuation">(</span>buf1<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> stream<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fclose</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    stream <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span>â€œout<span class="token punctuation">.</span>datâ€<span class="token punctuation">,</span> â€œrbâ€<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fread</span><span class="token punctuation">(</span>buf2<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> stream<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">fclose</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">6</span> <span class="token operator">&amp;&amp;</span> buf2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token function">printf</span><span class="token punctuation">(</span>â€œ<span class="token operator">%</span>x â€œ<span class="token punctuation">,</span> buf2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">printf</span><span class="token punctuation">(</span>â€œ\nâ€<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sizing-strings" tabindex="-1"><a class="header-anchor" href="#sizing-strings"><span>Sizing Strings</span></a></h2><ul><li>Buffer overflowsë¥¼ ì˜ˆë°©í•˜ê¸° ìœ„í•´ í•„ìˆ˜</li><li>The CERT C Secure Coding Standard <ul><li><code>STR31-C</code>. stringsìš© ì €ì¥ ê³µê°„ì´ character dataì™€ null terminatorë¥¼ ìœ„í•œ ì¶©ë¶„í•œ ê³µê°„ì„ ê°–ë„ë¡ ë³´ì¥</li></ul></li><li>ìš©ì–´ <ul><li>Size: arrayì— í• ë‹¹ëœ byte ìˆ˜ (<code>sizeof(array)</code>ì™€ ë™ì¼)</li><li>Count: arrayì˜ element ìˆ˜ (Visual Studio 2010ì˜ <code>_countof(array)</code>ì™€ ë™ì¼)</li><li>Length: null terminator ì•ì˜ character ìˆ˜ (<code>strlen()</code> ê²°ê³¼)</li></ul></li><li>Example</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">wchar_t</span> wide_str1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> Lâ€<span class="token number">0123456789</span>â€<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">wchar_t</span> <span class="token operator">*</span>wide_str2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">wchar_t</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>wide_str1<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>wide_str2 <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* handle error */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">strcpy</span><span class="token punctuation">(</span>wide_str2<span class="token punctuation">,</span> wide_str1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">/* â€¦ */</span></span>
<span class="line"><span class="token function">free</span><span class="token punctuation">(</span>wide_str2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">wide_str2 <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="common-string-manipulation-errors" tabindex="-1"><a class="header-anchor" href="#common-string-manipulation-errors"><span>Common String Manipulation Errors</span></a></h2><ul><li>4ê°€ì§€ ì¼ë°˜ì ì¸ ì˜¤ë¥˜ <ul><li><strong>unbounded string copies</strong> (ë¬´í•œ string ë³µì‚¬)</li><li><strong>off-by-one errors</strong></li><li>null-termination errors</li><li>String truncation</li><li>String truncation</li></ul></li></ul><h2 id="improperly-bounded-string-copies" tabindex="-1"><a class="header-anchor" href="#improperly-bounded-string-copies"><span>Improperly Bounded String Copies</span></a></h2><ul><li>ë°ì´í„°ê°€ ê³ ì •ëœ ê¸¸ì´ì˜ ë¬¸ìì—´ë¡œë¶€í„° ë³µì‚¬ë  ë•Œ <ul><li>ì˜ˆ: ê³ ì •ëœ ê¸¸ì´ ë²„í¼ì— í‘œì¤€ ì…ë ¥ìœ¼ë¡œ ì½ì–´ì˜¤ëŠ” ê²½ìš°</li></ul></li><li><code>gets()</code> <code>C99</code>ì— ì¶”ê°€ë˜ì—ˆìœ¼ë‚˜ <code>C11</code>ì—ì„œ ì œê±°</li><li>&quot;STR35-C. unbounded sourceì—ì„œë¶€í„° ê³ ì • ê¸¸ì´ ë°°ì—´ì— ë³µì‚¬í•˜ì§€ ë§ˆì‹œì˜¤.&quot;</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">get_y_or_n</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">char</span> response<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">&quot;Continue? [y] n: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">gets</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">&#39;n&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Example 2.1.</strong> Reading from <code>stdin()</code></p></blockquote><h2 id="copying-and-concatenating-strings" tabindex="-1"><a class="header-anchor" href="#copying-and-concatenating-strings"><span>Copying and concatenating strings</span></a></h2><h4 id="improperly-bounded-string-copies-1" tabindex="-1"><a class="header-anchor" href="#improperly-bounded-string-copies-1"><span>Improperly Bounded String Copies</span></a></h4><ul><li>Standard lib functions <ul><li><code>strcpy()</code>, <code>strcat()</code>, <code>sprintf()</code></li></ul></li><li><code>int main(int argc, char *argv[ ]) ...</code><ul><li><code>argv[0]</code> ~ <code>argv[argc-1]</code> : Null-terminated stringì„ ê°€ë¦¬í‚¤ëŠ” pointer</li><li><code>argv</code> arrayì˜ ì–´ë–¤ ìš”ì†Œë„(<code>argv[0]</code> í¬í•¨) nullì´ ì•„ë‹ˆë¼ê³  ê°€ì •í•˜ì§€ ë§ ê²ƒ</li></ul></li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* Do not assume that argv[0] can-</span>
<span class="line">    not be null */</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> <span class="token keyword">const</span> name <span class="token operator">=</span></span>
<span class="line">    argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">char</span> <span class="token operator">*</span>prog_name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>mal<span class="token operator">-</span></span>
<span class="line">    <span class="token function">loc</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>prog_name <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">strcpy</span><span class="token punctuation">(</span>prog_name<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">/* Failed to allocate memory -</span>
<span class="line">    recover */</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment">/* ... */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sprintf-function" tabindex="-1"><a class="header-anchor" href="#sprintf-function"><span><code>sprintf()</code> function</span></a></h2><ul><li>arrayì— outputì„ ì‘ì„±</li><li>ì‘ì„±ëœ characterì˜ ëì— null characterê°€ ì‘ì„±</li><li>target arrayì— í•„ìš”í•œ ìµœëŒ€ í¬ê¸°ë¥¼ ê²°ì •í•˜ê¸° ì–´ë ¤ì›€ <ul><li>ì˜ˆ: <code>INT_MAX</code> â†’ ìµœì†Œ 11 characters</li><li>ìŒì˜ ì •ìˆ˜, floating-point valuesëŠ” ì˜ˆì¸¡ì´ ë” ì–´ë ¤ì›€</li></ul></li><li><code>snprintf()</code> í•¨ìˆ˜ <ul><li>ì¶”ê°€ parameter: <code>size_t n</code></li><li>null charê°€ ì¶”ê°€ë˜ë¯€ë¡œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> charactersê°€ ì‘ì„±</li><li>ì„±ê³µ ì‹œ ì‘ì„±ëœ character ìˆ˜ (excluding null char) ë°˜í™˜</li><li>ë¹„êµì  ì•ˆì „í•˜ì§€ë§Œ, format string vulnerabilitiesì— ì·¨ì•½</li></ul></li></ul><h2 id="c-á„‹á…´-std-cin" tabindex="-1"><a class="header-anchor" href="#c-á„‹á…´-std-cin"><span>C++ì˜ <code>std::cin</code></span></a></h2><ul><li>ì´ ë˜í•œ ë¬¸ì œì  ìˆìŒ.</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> buf<span class="token punctuation">;</span></span>
<span class="line">  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;echo: &quot;</span> <span class="token operator">&lt;&lt;</span> buf <span class="token operator">&lt;&lt;</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>field widthë¥¼ <code>ios_base::width</code> ë˜ëŠ” <code>setw()</code>ë¡œ ì„¤ì • ê°€ëŠ¥</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> charactersê°€ ì¶”ì¶œëœ í›„ null characterê°€ ìë™ìœ¼ë¡œ ì¶”ê°€ë¨</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  std<span class="token double-colon punctuation">::</span>cin<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> buf<span class="token punctuation">;</span></span>
<span class="line">  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;echo: &quot;</span> <span class="token operator">&lt;&lt;</span> buf <span class="token operator">&lt;&lt;</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="off-by-one-errors" tabindex="-1"><a class="header-anchor" href="#off-by-one-errors"><span>Off-by-One Errors</span></a></h2><ul><li>ë˜ ë‹¤ë¥¸ ì¼ë°˜ì ì¸ ë¬¸ì œ</li><li>unbounded string copiesì™€ ìœ ì‚¬</li><li>Example</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">char</span> s1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;012345678&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">char</span> s2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;0123456789&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">char</span> <span class="token operator">*</span>dest<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">int</span> i<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">strcpy_s</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  dest <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">11</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    dest<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  dest<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;dest = %s&quot;</span><span class="token punctuation">,</span> dest<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">/* ... */</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="null-termination-errors" tabindex="-1"><a class="header-anchor" href="#null-termination-errors"><span>Null-Termination Errors</span></a></h2><ul><li>Example</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">char</span> a<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">char</span> b<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">char</span> c<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">strncpy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">&quot;0123456789abcdef&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">strncpy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token string">&quot;0123456789abcdef&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">strncpy</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">/* ... */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>strncpy()</code>ëŠ” ì²˜ìŒ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> charactersë¥¼ ë³µì‚¬ <ul><li>Null-terminationì„ ë³´ì¥í•˜ì§€ ì•ŠìŒ.</li></ul></li></ul><h2 id="string-vulnerabilities-and-exploits" tabindex="-1"><a class="header-anchor" href="#string-vulnerabilities-and-exploits"><span>String Vulnerabilities and Exploits</span></a></h2><ul><li>C ë˜ëŠ” C++ì—ì„œ String manipulation <ul><li>ì™¸ë¶€ sourceì˜ untrusted dataì—ì„œ ì‘ë™í•  ë•Œ ìœ„í—˜í•´ì§</li><li>ëª¨ë“  ì™¸ë¶€ ë°ì´í„°ë¥¼ untrustedë¡œ ë³´ëŠ” ê²ƒì´ ì•ˆì „</li></ul></li><li>Example</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line">bool <span class="token function">IsPasswordOK</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">char</span> Password<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">gets</span><span class="token punctuation">(</span>Password<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token number">0</span> <span class="token operator">==</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>Password<span class="token punctuation">,</span> <span class="token string">&quot;goodpass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  bool PwStatus<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">&quot;Enter password: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  PwStatus <span class="token operator">=</span> <span class="token function">IsPasswordOK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>PwStatus <span class="token operator">==</span> false<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">&quot;Access denied&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="buffer-overflows" tabindex="-1"><a class="header-anchor" href="#buffer-overflows"><span>Buffer Overflows</span></a></h2><ul><li>Example<br><img src="/assets/image-19-Cjue4mbt.png" alt=""></li><li>C ë° C++ê°€ buffer overflowsì— ì·¨ì•½í•œ ì´ìœ  <ul><li>Stringsë¥¼ null-terminated arrays of charactersë¡œ ì •ì˜</li><li>ì•”ë¬µì ì¸ bounds checkingì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ.</li><li>Bounds checkingì„ ê°•ì œí•˜ì§€ ì•ŠëŠ” stringsì— ëŒ€í•œ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸ì¶œ ì œê³µ</li></ul></li></ul><h2 id="process-memory-organization" tabindex="-1"><a class="header-anchor" href="#process-memory-organization"><span>Process Memory Organization</span></a></h2><p><img src="/assets/image-20-HbLIweZC.png" alt=""></p><h2 id="programs-and-processes" tabindex="-1"><a class="header-anchor" href="#programs-and-processes"><span>Programs and Processes</span></a></h2><p><img src="/assets/image-21-CEoRu-6N.png" alt=""></p><blockquote><p><strong>Figure 10.4</strong> Program Loading into Process Memory</p></blockquote><h2 id="stack-buffer-overflows" tabindex="-1"><a class="header-anchor" href="#stack-buffer-overflows"><span>Stack Buffer Overflows</span></a></h2><ul><li>Bufferê°€ stackì— ìœ„ì¹˜í•  ë•Œ ë°œìƒ <ul><li>Stack smashingì´ë¼ê³ ë„ í•¨</li></ul></li><li>Morris Wormì— ì˜í•´ ì‚¬ìš© <ul><li>exploitsëŠ” unchecked buffer overflowë¥¼ í¬í•¨</li></ul></li><li>ì—¬ì „íˆ ë„ë¦¬ ì•…ìš©ë˜ê³  ìˆìŒ.</li><li>Stack frame <ul><li>í•œ í•¨ìˆ˜ê°€ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ return addressë¥¼ ì €ì¥í•  ê³µê°„ í•„ìš”</li><li>í˜¸ì¶œëœ í•¨ìˆ˜ì— ì „ë‹¬ë  parametersì™€ register valuesë¥¼ ì €ì¥í•  ìœ„ì¹˜ë„ í•„ìš”</li></ul></li></ul><h2 id="stack-frame-with-functions-p-and-q" tabindex="-1"><a class="header-anchor" href="#stack-frame-with-functions-p-and-q"><span>Stack Frame with Functions P and Q</span></a></h2><pre><code>  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   
P:â”‚    Return Addr    â”‚                   
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   
  â”‚ Old Frame Pointer â”‚â—„â”€â”€â”               
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚               
  â”‚      param 2      â”‚   â”‚               
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚               
  â”‚      param 1      â”‚   â”‚               
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚               
Q:â”‚ Return Addr in P  â”‚   â”‚               
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚               
  â”‚ Old Frame Pointer â”‚â—„â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€ Frame  
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            Pointer
  â”‚      local 1      â”‚                   
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   
  â”‚      local 2      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Stack  
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            Pointer
  â”‚         â”‚         â”‚                   
  â”‚         â–¼         â”‚                   
</code></pre><blockquote><p><strong>Figure 10.3</strong> Examples Stack Frame with Functions P and Q</p></blockquote><h2 id="stack-management" tabindex="-1"><a class="header-anchor" href="#stack-management"><span>Stack Management</span></a></h2><ul><li>Stackì€ automatic process-state dataë¥¼ ìœ ì§€í•˜ì—¬ program executionì„ ì§€ì› <blockquote><p><strong>Figure 2.6.</strong> Stack management <img src="/assets/image-23-CDznNHSb.png" alt=""></p></blockquote></li><li>Stack frameì˜ ì •ë³´ <ul><li>return address</li><li>local variables</li><li>frame pointer</li></ul></li><li>(Disassembly using Intel Notation)</li></ul><p><img src="/assets/image-24-Cf0fC9MT.png" alt=""></p><ul><li><code>foo()</code> í•¨ìˆ˜ prologue</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">char</span> LocalChar<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> LocalInt<span class="token punctuation">;</span></span>
<span class="line">    push ebp        # Save the frame pointer<span class="token punctuation">.</span></span>
<span class="line">    mov ebp<span class="token punctuation">,</span> esp    # Frame pointer <span class="token keyword">for</span> subroutine is set to the</span>
<span class="line">                    <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">current</span> <span class="token expression">stack pointer<span class="token punctuation">.</span></span></span></span>
<span class="line">    sub esp<span class="token punctuation">,</span> <span class="token number">28</span>     # Allocates space <span class="token keyword">for</span> local variables<span class="token punctuation">.</span></span>
<span class="line">    <span class="token comment">/* ... */</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>foo()</code> í•¨ìˆ˜ Epilogue</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token comment">/* ... */</span></span>
<span class="line"><span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">    mov  esp<span class="token punctuation">,</span> ebp   # Restores the stack pointer<span class="token punctuation">.</span></span>
<span class="line">    pop  ebp        # Restores the frame pointer<span class="token punctuation">.</span></span>
<span class="line">    ret             # Pops the <span class="token keyword">return</span> address off the stack</span>
<span class="line">                    <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">and</span> <span class="token expression">transfers control to that location<span class="token punctuation">.</span></span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>foo()</code> í˜¸ì¶œ í›„ Stack frame</li></ul><table><thead><tr><th>Address</th><th>Value</th><th>Description (ì„¤ëª…)</th><th>Length</th></tr></thead><tbody><tr><td><code>0x0012FF4C</code></td><td>?</td><td>ë§ˆì§€ë§‰ local variableâ€”integer: <code>LocalInt</code></td><td>4</td></tr><tr><td><code>0x0012FF50</code></td><td>?</td><td>ì²« ë²ˆì§¸ local variableâ€”string: <code>LocalChar</code></td><td>24</td></tr><tr><td><code>0x0012FF68</code></td><td>0x12FF80</td><td>í˜¸ì¶œ í•¨ìˆ˜ <code>main()</code>ì˜ calling frame</td><td>4</td></tr><tr><td><code>0x0012FF6C</code></td><td>0x401040</td><td>í˜¸ì¶œ í•¨ìˆ˜ <code>main()</code>ì˜ return address</td><td>4</td></tr><tr><td><code>0x0012FF70</code></td><td>1</td><td>ì²« ë²ˆì§¸ argument: <code>MyInt</code> (<code>int</code>)</td><td>4</td></tr><tr><td><code>0x0012FF74</code></td><td>0x40703C</td><td>ë‘ ë²ˆì§¸ argument: pointer <code>toMyString</code> (<code>char *</code>)</td><td>4</td></tr></tbody></table><h2 id="stack-smashing" tabindex="-1"><a class="header-anchor" href="#stack-smashing"><span>Stack Smashing</span></a></h2><ul><li>Stack smashing <ul><li>Buffer overflowê°€ execution stackì— í• ë‹¹ëœ ë©”ëª¨ë¦¬ì˜ ë°ì´í„°ë¥¼ ë®ì–´ì“¸ ë•Œ ë°œìƒ</li><li>Stack segmentì˜ buffer overflowëŠ” ê³µê²©ìê°€ arbitrary codeë¥¼ ì‹¤í–‰í•˜ë„ë¡ ìœ ë„ ê°€ëŠ¥</li></ul></li><li>Example <img src="/assets/image-41-DrIaPH8Y.png" alt=""><img src="/assets/image-40-CsZFdFox.png" alt=""></li></ul><h2 id="corrupted-program-stack" tabindex="-1"><a class="header-anchor" href="#corrupted-program-stack"><span>Corrupted program stack</span></a></h2><p><img src="/assets/image-42-uaI2U5qq.png" alt="alt text"><img src="/assets/image-43-CCI3Dc8C.png" alt="alt text"></p><ul><li>Carefully crafted input string <ul><li><code>j = 0x6A</code>, <code>= 0x10</code>, <code>* = 0x2A</code>, <code>! = 0x21</code></li></ul></li></ul><h2 id="code-injection" tabindex="-1"><a class="header-anchor" href="#code-injection"><span>Code Injection</span></a></h2><ul><li>Return addressê°€ ë®ì–´ì“°ì—¬ì§ˆ ë•Œ <ul><li>ì œì–´ íë¦„ì„ ìƒˆ ì£¼ì†Œë¡œ ì „ë‹¬í•˜ëŠ” ê²ƒì€ ì¼ë°˜ì ìœ¼ë¡œ trapì„ ìœ ë°œí•˜ê³  corrupted stackì„ ì´ˆë˜</li><li>ê³µê²©ìê°€ ì•…ì„± codeì— ëŒ€í•œ pointerë¥¼ í¬í•¨í•˜ëŠ” specially crafted stringì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥</li><li>ì•…ì„± codeëŠ” ì·¨ì•½í•œ programì´ ê°€ì§„ ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰</li></ul></li><li>Malicious arguments <ul><li>ì·¨ì•½í•œ programì— ì˜í•´ legitimate inputìœ¼ë¡œ ìˆ˜ìš©ë˜ì–´ì•¼ í•¨</li><li>ë‹¤ë¥¸ ì œì–´ ê°€ëŠ¥í•œ ì…ë ¥ê³¼ í•¨ê»˜ ì¸ìˆ˜ê°€ ì·¨ì•½í•œ code pathì˜ ì‹¤í–‰ì„ ì´ˆë˜í•´ì•¼ í•¨</li><li>Shellcodeë¡œ ì œì–´ê°€ ì „ë‹¬ë˜ê¸° ì „ì— ì¸ìˆ˜ê°€ programì„ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œì‹œí‚¤ì§€ ì•Šì•„ì•¼ í•¨</li></ul></li><li>Example <ul><li><code>./BufferOverflow &lt; exploit.bin</code><img src="/assets/image-44-DTZGpzPw.png" alt="alt text"></li></ul><ol><li>ì²« ë²ˆì§¸ <code>mov</code> instructionì€ %eax registerì— <code>0xB</code> í• ë‹¹</li><li><code>execve()</code> í•¨ìˆ˜ í˜¸ì¶œì„ ìœ„í•œ ì„¸ ì¸ìˆ˜ëŠ” í›„ì† ì„¸ instructionsì—ì„œ ì„¤ì •</li><li><code>int $0x50</code> instructionì€ <code>execve()</code>ë¥¼ í˜¸ì¶œí•˜ì—¬ Linux calendar programì„ ì‹¤í–‰</li></ol></li></ul><h2 id="modified-example" tabindex="-1"><a class="header-anchor" href="#modified-example"><span>Modified Example</span></a></h2><p><img src="/assets/image-45-CKkiYpLP.png" alt="alt text"></p><ul><li><code>gets()</code> ëŒ€ì‹  <code>fgets()</code> ì‚¬ìš©</li><li>Buffer overflowê°€ ì—¬ì „íˆ ë°œìƒí•  ìˆ˜ ìˆìŒ.</li><li>Modified Example <ul><li>Exploit Code <img src="/assets/image-46-DdLkHJNN.png" alt="alt text"></li><li>Corrupted Stack</li></ul></li></ul><table><thead><tr><th style="text-align:left;">Row</th><th style="text-align:left;">Address</th><th style="text-align:left;">Content</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">0xbffff9c0<br>-0xbffff9cf</td><td style="text-align:left;">&quot;123456789012456&quot;</td><td style="text-align:left;">Password(16 bytes) ë° paddingì„ ìœ„í•œ ì €ì¥ ê³µê°„</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;">0xbffff9d0<br>-0xbffff9db</td><td style="text-align:left;">&quot;789012345678&quot;</td><td style="text-align:left;">ì¶”ê°€ padding</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">0xbffff9dc</td><td style="text-align:left;">(0xbffff9e0)</td><td style="text-align:left;">ìƒˆë¡œìš´ return address</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;">0xbffff9e0</td><td style="text-align:left;">xor %eax,%eax</td><td style="text-align:left;">eaxë¥¼ 0ìœ¼ë¡œ ì„¤ì •</td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;">0xbffff9e2</td><td style="text-align:left;">mov %eax,0xbffff9ff</td><td style="text-align:left;">Null pointerë¡œ pointer array ì¢…ë£Œ</td></tr><tr><td style="text-align:left;">6</td><td style="text-align:left;">0xbffff9e7</td><td style="text-align:left;">mov $0xb,%al</td><td style="text-align:left;">execve() function callì„ ìœ„í•œ code ì„¤ì •</td></tr><tr><td style="text-align:left;">7</td><td style="text-align:left;">0xbffff9e9</td><td style="text-align:left;">mov $0xbffffa03,%ebx</td><td style="text-align:left;">execve()ì˜ ì²« ë²ˆì§¸ argumentë¥¼ ê°€ë¦¬í‚¤ë„ë¡ ebx ì„¤ì •</td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;">0xbffff9ee</td><td style="text-align:left;">mov $0xbffff9fb,%ecx</td><td style="text-align:left;">execve()ì˜ ë‘ ë²ˆì§¸ argumentë¥¼ ê°€ë¦¬í‚¤ë„ë¡ ecx ì„¤ì •</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;">0xbffff9f3</td><td style="text-align:left;">mov 0xbffff9ff,%edx</td><td style="text-align:left;">execve()ì˜ ì„¸ ë²ˆì§¸ argumentë¥¼ ê°€ë¦¬í‚¤ë„ë¡ edx ì„¤ì •</td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;">0xbffff9f9</td><td style="text-align:left;">int $80</td><td style="text-align:left;">execve() system call í˜¸ì¶œ</td></tr><tr><td style="text-align:left;">11</td><td style="text-align:left;">0xbffff9fb</td><td style="text-align:left;">0xbffff9ff</td><td style="text-align:left;">ìƒˆ programì— ì „ë‹¬ë˜ëŠ” argument stringë“¤ì˜ array</td></tr><tr><td style="text-align:left;">12</td><td style="text-align:left;">0xbffff9ff</td><td style="text-align:left;">&quot;1111&quot;</td><td style="text-align:left;">Pointer arrayë¥¼ ì¢…ë£Œí•˜ê¸° ìœ„í•´ 0x00000000ìœ¼ë¡œ ë³€ê²½ ë° ì„¸ ë²ˆì§¸ argumentë¡œ ì‚¬ìš©</td></tr><tr><td style="text-align:left;">13</td><td style="text-align:left;">0xbffffa03<br>-0xbffffa0f</td><td style="text-align:left;">&quot;/usr/bin/cal\0&quot;</td><td style="text-align:left;">ì‹¤í–‰í•  command</td></tr></tbody></table><h2 id="arc-injection" tabindex="-1"><a class="header-anchor" href="#arc-injection"><span>Arc Injection</span></a></h2><ul><li>Arc injection technique <ul><li>ì´ë¯¸ process memoryì— ì¡´ì¬í•˜ëŠ” codeë¡œ ì œì–´ë¥¼ ì „ë‹¬</li><li>ìƒˆë¡œìš´ arc (control-flow transfer) ì‚½ì…</li><li><code>system()</code> ë˜ëŠ” <code>exec()</code>ì„ ì‚¬ìš©í•˜ì—¬ commands ì‹¤í–‰ ê°€ëŠ¥</li><li>ì—¬ëŸ¬ í•¨ìˆ˜ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œ ê°€ëŠ¥</li></ul></li><li>ê³µê²©ìê°€ code injectionë³´ë‹¤ arc injectionì„ ì„ í˜¸í•  ìˆ˜ ìˆëŠ” ì´ìœ  <ul><li>ëŒ€ìƒ ì‹œìŠ¤í…œì˜ ë©”ëª¨ë¦¬ì— ì´ë¯¸ codeê°€ ì¡´ì¬</li><li>Footprintë¥¼ í˜„ì €íˆ ì‘ê²Œ ìœ ì§€ ê°€ëŠ¥</li><li>Memory-based protection schemesë¡œ ë³´í˜¸í•  ìˆ˜ ì—†ìŒ.</li></ul></li><li>Example</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">#inclue &lt;string.h&gt;</span>
<span class="line"></span>
<span class="line">int get_buff(char *user_input, size_t size) {</span>
<span class="line">    char buff[40];</span>
<span class="line">    memcpy(buff, user_input, size);</span>
<span class="line">    return 0;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">int main(void) {</span>
<span class="line">    /* ... */</span>
<span class="line">    get_buff(tainted_char_array, tainted_size);</span>
<span class="line">    /* ... */</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mitigation-strategies" tabindex="-1"><a class="header-anchor" href="#mitigation-strategies"><span>Mitigation Strategies</span></a></h2><ul><li>ì—¬ëŸ¬ ì „ëµì„ ê²°í•©í•˜ëŠ” defense-in-depth tactic ì±„íƒ <ul><li>String handlingì— ëŒ€í•œ secure technique</li><li><ul><li>í•˜ë‚˜ ì´ìƒì˜ runtime detection</li></ul></li></ul></li><li>String handling <ul><li>Character strings ì²˜ë¦¬ì— ëŒ€í•œ ë‹¨ì¼ ì ‘ê·¼ ë°©ì‹ ì„ íƒ ê¶Œì¥</li><li>Character strings ì²˜ë¦¬ì— ëŒ€í•œ ë‹¨ì¼ ì ‘ê·¼ ë°©ì‹ ì„ íƒ ê¶Œì¥</li><li>String-handling functionsëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ ë°©ì‹ì— ë”°ë¼ ë¶„ë¥˜ <ul><li>Caller allocates, caller frees (<code>C99</code>, <code>OpenBSD</code>, <code>C11</code> Annex K)</li><li>Callee allocates, caller frees (<code>ISO/IEC TR 24731-2</code>)</li><li>Callee allocates, callee frees (<code>C++</code> <code>std::basic_string</code>)</li></ul></li></ul></li></ul><h2 id="c11-annex-k-bounds-checking" tabindex="-1"><a class="header-anchor" href="#c11-annex-k-bounds-checking"><span><code>C11</code> Annex K Bounds-Checking</span></a></h2><ul><li>ì²« ë²ˆì§¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ model (caller allocatesí•˜ê³  caller freeí•˜ëŠ” ë°©ë²•)</li><li><code>C11</code> Annex K <ul><li>ëŒ€ì•ˆì ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ ì œê³µ</li><li>output buffersê°€ ì˜ë„í•œ ê²°ê³¼ë¥¼ ë‹´ì„ ë§Œí¼ ì¶©ë¶„íˆ í°ì§€ í™•ì¸</li><li>ì¶©ë¶„í•˜ì§€ ì•Šìœ¼ë©´ failure indicator ë°˜í™˜</li><li>ëª¨ë“  string resultsëŠ” null-terminated</li></ul></li><li>ì˜ˆ: <code>strcpy_s()</code>, <code>strcat_s()</code>, <code>strncpy_s()</code>, <code>strncat_s()</code>, ... ì •ì˜</li><li><code>ISO/IEC TR 24731-1</code>ë¡œ ê²Œì‹œ â†’ ë‚˜ì¤‘ì— <code>C11</code>ì— optional extensions ì„¸íŠ¸ë¡œ í†µí•©</li><li><code>__STDC_LIB_EXT1__</code> macro ì •ì˜ í•„ìš”</li><li><code>C11</code> Annex KëŠ” normativeì´ì§€ë§Œ optimal annex</li><li><code>gcc</code>ì—ì„œëŠ” implementedë˜ì§€ ì•ŠìŒ.</li><li>ìœ íš¨í•˜ì§€ ì•Šì€ í¬ê¸°ê°€ í•¨ìˆ˜ì— ì „ë‹¬ë˜ë©´ buffer overflow problemsë¥¼ ê²ªì„ ìˆ˜ ìˆìŒ.</li></ul><h2 id="c11-annex-k" tabindex="-1"><a class="header-anchor" href="#c11-annex-k"><span><code>C11</code> Annex K</span></a></h2><ul><li>Example: <code>gets_s()</code></li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__STDC_WANT_LIB_EXT1__</span> <span class="token expression"><span class="token number">1</span></span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">get_y_or_n</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">char</span> response<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">size_t</span> len <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">&quot;Continue? [y] n: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">gets_s</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> n<span class="token punctuation">)</span></span>
<span class="line">        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="runtime-constraint-handler-function" tabindex="-1"><a class="header-anchor" href="#runtime-constraint-handler-function"><span>Runtime-constraint-handler function</span></a></h2><ul><li>ì˜¤ë¥˜ ê°ì§€ ì‹œ íŠ¹ìˆ˜ runtime-constraint-handler function í˜¸ì¶œ <ul><li>ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥ ë°/ë˜ëŠ” program ì¤‘ë‹¨ ê°€ëŠ¥</li></ul></li><li><code>set_constraint_handler_s()</code> í•¨ìˆ˜ë¥¼ í†µí•´ í˜¸ì¶œë˜ëŠ” handler function ì œì–´ ê°€ëŠ¥</li><li>&quot;<code>ERR03-C</code>. Use runtime-constraint handlers when calling functions defined by TR24731-1&quot; <ul><li>Implementation-defined behaviorë¥¼ ì œê±°í•˜ê¸° ìœ„í•´ runtime-constraint handler ì„¤ì¹˜ ê¶Œì¥</li></ul></li></ul><h2 id="c11-annex-k-1" tabindex="-1"><a class="header-anchor" href="#c11-annex-k-1"><span><code>C11</code> Annex K</span></a></h2><ul><li>Example 2.6. <code>gets_s()</code> (Improved)</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__STDC_WANT_LIB_EXT1__</span> <span class="token expression"><span class="token number">1</span></span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">get_y_or_n</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">char</span> response<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">size_t</span> len <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">&quot;Continue? [y] n: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">gets_s</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> len<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">&#39;n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">constraint_handler_t</span> oconstraint <span class="token operator">=</span> <span class="token function">set_constraint_handler_s</span><span class="token punctuation">(</span>ignore_handler_s<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">get_y_or_n</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="runtime-constraint-handler-function-1" tabindex="-1"><a class="header-anchor" href="#runtime-constraint-handler-function-1"><span>Runtime-constraint-handler function</span></a></h2><ul><li><code>ignore_handler_s()</code> í•¨ìˆ˜ë¡œ ì„¤ì •ëœ ê²½ìš° <ul><li>ëª¨ë“  ìœ„ë°˜ì€ callerì—ê²Œ ë°˜í™˜</li></ul></li><li>ëŒ€ë¶€ë¶„ì˜ bounds-checking functionsëŠ” nonzero <code>errno_t</code> ë°˜í™˜ <ul><li><code>gets_s()</code> í•¨ìˆ˜ëŠ” null pointer ë°˜í™˜ (compatibilityë¥¼ ìœ„í•´)</li></ul></li><li>&quot;<code>ERR00-C</code>. ì¼ê´€ë˜ê³  í¬ê´„ì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬ ì •ì±…ì„ ì±„íƒí•˜ê³  ì‹œí–‰&quot;</li><li>Original constraint handler <ul><li>ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ê°€ constraint handlerë¥¼ ì„¤ì •í•˜ëŠ” ê²½ìš°, í•¨ìˆ˜ëŠ” ë°˜í™˜ ë˜ëŠ” ì¢…ë£Œ ì „ì— original constraint handlerë¥¼ ë³µì›í•´ì¤˜ì•¼ í•¨</li></ul></li></ul><h2 id="dynamic-allocation-functions" tabindex="-1"><a class="header-anchor" href="#dynamic-allocation-functions"><span>Dynamic Allocation Functions</span></a></h2><ul><li>ë‘ ë²ˆì§¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ model (callee allocates, caller frees) <ul><li><code>ISO/IEC TR 24731-2</code></li><li><code>ISO/IEC TR 24731-2</code></li></ul></li><li>ì´ëŸ¬í•œ í•¨ìˆ˜ ì‚¬ìš©ì€ ë‚˜ì¤‘ì— buffersë¥¼ freeí•˜ê¸° ìœ„í•œ ì¶”ê°€ í˜¸ì¶œì´ í•„ìš”</li><li><code>ISO/IEC TR 24731-2</code>ì— ì„¤ëª…ëœ í•¨ìˆ˜ëŠ” ë²„í¼ê°€ í•­ìƒ í•„ìš”í•œ ë°ì´í„°ë¥¼ ë‹´ì„ ìˆ˜ ìˆë„ë¡ ìë™ í¬ê¸° ì¡°ì • â†’ ë” í° ë³´ì¥ ì œê³µ <ul><li>Denial-of-service attacksë¥¼ ê²ªì„ ìˆ˜ ìˆìŒ.</li></ul></li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">__STDC_WANT_LIB_EXT1__</span> <span class="token expression"><span class="token number">1</span></span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">get_y_or_n</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">char</span> response<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">size_t</span> len <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">&quot;Continue? [y] n: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">getline</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>response<span class="token punctuation">,</span> <span class="token operator">&amp;</span>len<span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>len <span class="token operator">&amp;&amp;</span> response<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">&#39;n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">free</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">free</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Example: <code>getline()</code><ul><li>Bufferë¥¼ dynamically allocate</li><li>Bufferë¥¼ <code>free</code>í•´ì•¼ í•¨</li></ul></li></ul><h2 id="string-stream" tabindex="-1"><a class="header-anchor" href="#string-stream"><span>String stream</span></a></h2><ul><li><code>fmemopen()</code>, <code>open_memstream()</code></li><li>í•¨ìˆ˜ prototypes</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line">FILE <span class="token operator">*</span><span class="token function">fmemopen</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token operator">*</span> restrict buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> restrict mode</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">FILE <span class="token operator">*</span><span class="token function">open_memstream</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span> restrict bufp<span class="token punctuation">,</span> <span class="token class-name">size_t</span> <span class="token operator">*</span> restrict sizep</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>open_memstream()</code>ì— ì˜í•´ ì—´ë¦° streamì˜ ê²½ìš° <ul><li>write operationsë¥¼ ìˆ˜ìš©í•˜ê¸° ìœ„í•´ ë©”ëª¨ë¦¬ ì˜ì—­ì´ dynamically ì¦ê°€</li><li>CallerëŠ” í• ë‹¹ëœ ë©”ëª¨ë¦¬ë¥¼ freeí•´ì•¼ í•¨ (line 16)</li></ul></li><li>Dynamic allocationì€ safety-critical systemsì—ì„œ ì¢…ì¢… í—ˆìš©ë˜ì§€ ì•ŠìŒ.</li><li>Example</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">char</span> <span class="token operator">*</span>buf<span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">size_t</span> size<span class="token punctuation">;</span></span>
<span class="line">    FILE <span class="token operator">*</span>stream<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    stream <span class="token operator">=</span> <span class="token function">open_memstream</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>buf<span class="token punctuation">,</span> <span class="token operator">&amp;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>stream <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* handle error */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fprintf</span><span class="token punctuation">(</span>stream<span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fflusth</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;buf = &#39;%s&#39;, size = %zu\n&quot;</span><span class="token punctuation">,</span> buf<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fprintf</span><span class="token punctuation">(</span>stream<span class="token punctuation">,</span> <span class="token string">&quot;, world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">fclose</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;buf = &#39;%s&#39;, size = %zu\n&quot;</span><span class="token punctuation">,</span> buf<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">free</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="c-std-basic-string" tabindex="-1"><a class="header-anchor" href="#c-std-basic-string"><span>C++ <code>std::basic_string</code></span></a></h2><ul><li>C++ extraction operator <code>operator&gt;&gt;</code><ul><li>Field widthë¥¼ ì„¤ì •í•˜ì—¬ buffer overflow vulnerability ì œê±°</li><li>Truncation ë¬¸ì œ</li><li>ì˜ˆìƒì¹˜ ëª»í•œ program behaviorê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ.</li></ul></li><li>ISO/IEC 14882ì— ì •ì˜ëœ í‘œì¤€ <code>std::string class</code><ul><li>type <code>char</code>ì— ëŒ€í•œ <code>std::basic_string template</code>ì˜ specialization</li></ul></li><li><code>basic_string class</code><ul><li>Stringsì— ëŒ€í•œ dynamic approach ì‚¬ìš©</li><li>&quot;callee allocates, callee frees&quot; ë©”ëª¨ë¦¬ ê´€ë¦¬ ì „ëµ â†’ ê°€ì¥ ì•ˆì „í•œ ì ‘ê·¼ ë°©ì‹</li></ul></li><li>Example</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">string str1 <span class="token operator">=</span> â€œhello<span class="token punctuation">,</span> â€œ<span class="token punctuation">;</span></span>
<span class="line">string str2 <span class="token operator">=</span> â€œworldâ€<span class="token punctuation">;</span></span>
<span class="line">string str3 <span class="token operator">=</span> str1 <span class="token operator">+</span> str2<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="example-std-cin" tabindex="-1"><a class="header-anchor" href="#example-std-cin"><span>Example: <code>std::cin</code></span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span></span>
<span class="line"><span class="token keyword">using</span> namepsace std<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    string str<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    cin <span class="token operator">&gt;&gt;</span> str<span class="token punctuation">;</span></span>
<span class="line">    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;str 1: &quot;</span> <span class="token operator">&lt;&lt;</span> str <span class="token operator">&lt;&lt;</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="std-out-of-range" tabindex="-1"><a class="header-anchor" href="#std-out-of-range"><span><code>std::out_of_range</code></span></a></h2><ul><li>Subscript member <code>std::string::operator[]</code><ul><li>Exceptionì„ ë˜ì§€ì§€ ì•ŠìŒ.</li><li>Example<div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">string <span class="token function">bs</span><span class="token punctuation">(</span>â€œ<span class="token number">01234567</span>â€<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">size_t i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line">bs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> â€˜\<span class="token number">0</span>â€™<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><code>at()</code> method <ul><li><code>operator[]</code>ì™€ ìœ ì‚¬í•˜ì§€ë§Œ, <code>pos &gt;= size()</code>ì´ë©´ out_of_range exception ë°œìƒ</li></ul></li><li>Example</li></ul><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">string <span class="token function">bs</span><span class="token punctuation">(</span><span class="token string">&quot;01234567&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    size_t i <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    bs<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">catch</span> <span class="token punctuation">(</span>out_of_range<span class="token operator">&amp;</span> oor<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    cerr <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Out of Range error: &quot;</span> <span class="token operator">&lt;&lt;</span> oor<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="c-str" tabindex="-1"><a class="header-anchor" href="#c-str"><span><code>c_str()</code></span></a></h2><ul><li><code>string</code>ì„ null-terminated byte stringìœ¼ë¡œ ë³€í™˜ <ul><li><code>c_str()</code> method</li><li>Example<div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">string <span class="token function">str</span><span class="token punctuation">(</span>â€œabcdâ€<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">cout <span class="token operator">&lt;&lt;</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h2 id="string-handling-functions" tabindex="-1"><a class="header-anchor" href="#string-handling-functions"><span>String-Handling Functions</span></a></h2><ul><li><code>gets()</code><ul><li>ì ˆëŒ€ <code>gets()</code> í•¨ìˆ˜ í˜¸ì¶œ ê¸ˆì§€</li><li>ì¢…ë£Œ newline ë˜ëŠ” <code>EOF</code>ê°€ ë°œê²¬ë  ë•Œê¹Œì§€ í‘œì¤€ ì…ë ¥ì—ì„œ bufferë¡œ í•œ ì¤„ì„ ì½ìŒ.</li><li><code>C11</code>ì—ì„œ ì œê±°</li><li><code>C11</code>ì—ì„œ ì œê±°</li></ul></li><li>ëŒ€ì²´ í•¨ìˆ˜ <ul><li><code>C99</code><ul><li><code>fgets()</code></li><li><code>getchar()</code></li></ul></li></ul></li></ul><h2 id="fgets" tabindex="-1"><a class="header-anchor" href="#fgets"><span><code>fgets()</code></span></a></h2><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">char</span> buf<span class="token punctuation">[</span>LINE_MAX<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> ch<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">char</span> <span class="token operator">*</span>p<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fgets</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* fgets succeeds, scan for newline character */</span></span>
<span class="line">    p <span class="token operator">=</span> <span class="token function">strchr</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">/* newline not found, flush stdin to end of line */</span></span>
<span class="line">        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">ferror</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* fgets failed, handle error */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="fgets-and-getchar" tabindex="-1"><a class="header-anchor" href="#fgets-and-getchar"><span><code>fgets()</code> and <code>getchar()</code></span></a></h2><ul><li><code>fgets()</code><ul><li>Newline characterë¥¼ ìœ ì§€</li><li>Truncation: ì‚¬ìš©ì ì…ë ¥ì´ ì˜ë¦´ ìˆ˜ ìˆìŒ.</li><li>ì…ë ¥í•  character ìˆ˜ê°€ destination bufferì˜ ê¸¸ì´ë³´ë‹¤ í¬ë©´ buffer overflow ë°œìƒ ê°€ëŠ¥</li></ul></li><li><code>getchar()</code><ul><li><code>stdin</code>ì´ ê°€ë¦¬í‚¤ëŠ” ì…ë ¥ streamì—ì„œ ë‹¤ìŒ character ë°˜í™˜</li><li>Streamì´ <code>EOF</code>ì— ìˆê±°ë‚˜ read error ë°œìƒ ì‹œ <code>EOF</code> ë°˜í™˜</li></ul></li></ul><h2 id="getchar" tabindex="-1"><a class="header-anchor" href="#getchar"><span><code>getchar()</code></span></a></h2><ul><li>Example 2.10. <code>getchar()</code></li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">char</span> buf<span class="token punctuation">[</span>BUFSIZ<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> ch<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> chars_read <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">ferror</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">)</span> </span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> BUFSIZ <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        buf<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token punctuation">)</span>ch<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    chars_read<span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token comment">/* end while */</span></span>
<span class="line"></span>
<span class="line">buf<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">;</span> <span class="token comment">/* null-terminate */</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* handle EOF */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">ferror</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* handle error */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>chars_read <span class="token operator">&gt;</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* handle truncation */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="c11-annext-k-gets-s" tabindex="-1"><a class="header-anchor" href="#c11-annext-k-gets-s"><span><code>C11</code> Annext K gets_s()</span></a></h2><ul><li><code>C11</code> <code>gets_s()</code> í•¨ìˆ˜ <ul><li><code>gets()</code>ì™€ í˜¸í™˜</li><li>ë” ì•ˆì „í•œ version</li><li><code>stdin</code>ì—ì„œ ì½ìŒ.</li><li>Newline characterë¥¼ ìœ ì§€í•˜ì§€ ì•ŠìŒ.</li></ul></li><li>ì˜¤ë¥˜ ë°œìƒ ì‹œ <ul><li>ì…ë ¥ ìˆ˜í–‰ ì•ˆ í•¨</li><li>Char array ìˆ˜ì • ì•ˆ í•¨</li></ul></li><li>ê·¸ ì™¸ì˜ ê²½ìš° <ul><li>ì§€ì •ëœ char ìˆ˜ë³´ë‹¤ ìµœëŒ€ í•˜ë‚˜ ì ê²Œ ì½ìŒ.</li><li>ë§ˆì§€ë§‰ char ë‹¤ìŒì— null char ì‘ì„±</li></ul></li><li><code>gets_s()</code> í•¨ìˆ˜ <ul><li>ì™„ì „í•œ í•œ ì¤„ì„ ì½ì„ ë•Œë§Œ ì„±ê³µ</li><li>ì™„ì „í•œ ì¤„ì„ ì½ì„ ìˆ˜ ì—†ìœ¼ë©´ <code>NULL</code> ë°˜í™˜, bufferë¥¼ null stringìœ¼ë¡œ ì„¤ì •, ì…ë ¥ streamì„ ë‹¤ìŒ newline charê¹Œì§€ ì •ë¦¬</li></ul></li></ul><h2 id="dynamic-allocation-functions-1" tabindex="-1"><a class="header-anchor" href="#dynamic-allocation-functions-1"><span>Dynamic Allocation Functions</span></a></h2><ul><li><code>getline()</code> í•¨ìˆ˜ <ul><li><code>ISO/IEC TR 24731-2</code>ì— ì„¤ëª…</li><li><code>ISO/IEC TR 24731-2</code>ì— ì„¤ëª…</li><li><code>fgets()</code>ì™€ ìœ ì‚¬í•˜ì§€ë§Œ ì¶”ê°€ ê¸°ëŠ¥ í¬í•¨ <ul><li>Destination bufferë¥¼ dynamically resize</li><li>ì½ì€ character ìˆ˜ ë°˜í™˜</li></ul></li><li>Destination bufferê°€ <code>malloc()</code>ìœ¼ë¡œ í• ë‹¹ëœ ê²½ìš°ì—ë§Œ ì‘ë™</li><li>ì‚¬ìš©ìëŠ” ë‚˜ì¤‘ì— bufferë¥¼ ëª…ì‹œì ìœ¼ë¡œ <code>free()</code>í•´ì•¼ í•¨</li></ul></li></ul><h2 id="getline" tabindex="-1"><a class="header-anchor" href="#getline"><span><code>getline()</code></span></a></h2><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">int</span> ch<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">char</span> <span class="token operator">*</span>p<span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">size_t</span> buffer_size <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">char</span> <span class="token operator">*</span>buffer <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span>buffer_size<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">ssize_t</span> size<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>size <span class="token operator">=</span> <span class="token function">getline</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>buffer<span class="token punctuation">,</span> <span class="token operator">&amp;</span>buffer_size<span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* handle error */</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    p <span class="token operator">=</span> <span class="token function">strchr</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">/* newline not found, flush stdin to end of line */</span></span>
<span class="line">        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">ferror</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* ... work with buffer ... */</span></span>
<span class="line"></span>
<span class="line"><span class="token function">free</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="alternative-functions-for-gets" tabindex="-1"><a class="header-anchor" href="#alternative-functions-for-gets"><span>Alternative functions for <code>gets()</code></span></a></h2><h3 id="table-2-4-alternative-functions-for-gets" tabindex="-1"><a class="header-anchor" href="#table-2-4-alternative-functions-for-gets"><span>Table 2.4. Alternative Functions for <code>gets()</code></span></a></h3><table><thead><tr><th></th><th>Standard/TR</th><th>Retains Newline Character</th><th>Dynamically Allocates Memory</th></tr></thead><tbody><tr><td><code>fgets()</code></td><td><code>C99</code></td><td>Yes</td><td>No</td></tr><tr><td><code>getline()</code></td><td><code>TR 24731-2</code></td><td>Yes</td><td>Yes</td></tr><tr><td><code>gets_s()</code></td><td><code>C11</code></td><td>No</td><td>No</td></tr></tbody></table><h2 id="strcpy-and-strcat" tabindex="-1"><a class="header-anchor" href="#strcpy-and-strcat"><span><code>strcpy()</code> and <code>strcat()</code></span></a></h2><ul><li><code>C99</code><ul><li>C í‘œì¤€ <code>strncpy()</code> í•¨ìˆ˜ê°€ ì¢…ì¢… ëŒ€ì•ˆìœ¼ë¡œ ê¶Œì¥ <ul><li><code>strncpy()</code>ëŠ” null-termination errors ë° ê¸°íƒ€ ë¬¸ì œì— ì·¨ì•½</li></ul></li></ul></li><li><code>OpenBSD</code><ul><li><code>strlcpy()</code> ë° <code>strlcat()</code></li><li>Size parameterë¡œ destination stringì˜ ì „ì²´ í¬ê¸° ì‚¬ìš©</li><li>Destination stringì´ null-terminatedì„ì„ ë³´ì¥</li><li>ìƒì„±í•˜ë ¤ê³  ì‹œë„í•œ stringì˜ ì´ ê¸¸ì´ ë°˜í™˜</li></ul></li></ul><h2 id="c11-annex-k-bounds-checking-interfaces" tabindex="-1"><a class="header-anchor" href="#c11-annex-k-bounds-checking-interfaces"><span><code>C11</code> Annex K Bounds-Checking interfaces</span></a></h2><ul><li><code>strcpy_s()</code> ë° <code>strcat_s()</code><ul><li>ì„±ê³µ ì‹œ <code>0</code> ë°˜í™˜</li><li>ê·¸ ì™¸ì˜ ê²½ìš° nonzero value ë°˜í™˜</li><li>ë‹¤ì–‘í•œ runtime constraints ê°•ì œ <ul><li>s1 ë˜ëŠ” s2ê°€ null pointerì¸ ê²½ìš°</li><li>Destination bufferì˜ í¬ê¸°ê°€ <code>0</code>, <code>RSIZE_MAX</code>ë³´ë‹¤ í¬ê±°ë‚˜, source stringì˜ ê¸¸ì´ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ê²½ìš°</li></ul></li></ul></li></ul><h2 id="string-copy-functions" tabindex="-1"><a class="header-anchor" href="#string-copy-functions"><span>String copy functions</span></a></h2><h3 id="table-2-5-string-copy-functions" tabindex="-1"><a class="header-anchor" href="#table-2-5-string-copy-functions"><span>Table 2.5. String Copy Functions</span></a></h3><table><thead><tr><th></th><th>Standard/TR</th><th>Buffer Overflow Protection</th><th>Guarantees Null Termination</th><th>May Truncate String</th><th>Allocates Dynamic Memory</th></tr></thead><tbody><tr><td><code>strcpy()</code></td><td>C99</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td><code>strncpy()</code></td><td>C99</td><td>Yes</td><td>No</td><td>Yes</td><td>No</td></tr><tr><td><code>strlcpy()</code></td><td><code>OpenBSD</code></td><td>Yes</td><td>Yes</td><td>Yes</td><td>No</td></tr><tr><td><code>strdup()</code></td><td>TR 24731-2</td><td>Yes</td><td>Yes</td><td>No</td><td>Yes</td></tr><tr><td><code>strcpy_s()</code></td><td>C11</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td></tr></tbody></table><h3 id="table-2-6-string-concatenation-functions" tabindex="-1"><a class="header-anchor" href="#table-2-6-string-concatenation-functions"><span>Table 2.6. String Concatenation Functions</span></a></h3><table><thead><tr><th></th><th>Standard/TR</th><th>Buffer Overflow Protection</th><th>Guarantees Null Termination</th><th>May Truncate String</th><th>Allocates Dynamic Memory</th></tr></thead><tbody><tr><td><code>strcat()</code></td><td>C99</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td><code>strncat()</code></td><td>C99</td><td>Yes</td><td>No</td><td>Yes</td><td>No</td></tr><tr><td><code>strlcat()</code></td><td><code>OpenBSD</code></td><td>Yes</td><td>Yes</td><td>Yes</td><td>No</td></tr><tr><td><code>strcat_s()</code></td><td>C11</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td></tr></tbody></table><h2 id="strncpy-and-strncat" tabindex="-1"><a class="header-anchor" href="#strncpy-and-strncat"><span><code>strncpy()</code> and <code>strncat()</code></span></a></h2><ul><li><code>size_t parameter n</code> ì¶”ê°€</li><li><code>strncpy()</code><ul><li>Destination stringì˜ null-terminateë¥¼ ë³´ì¥í•˜ì§€ ì•ŠìŒ.</li><li>String termination errorsì— ì·¨ì•½</li></ul></li><li><code>strncat(s1, s2, n)</code><ul><li>S1 bufferì˜ ìµœì†Œ í¬ê¸°ëŠ” <code>strlen(s1) + n + 1</code>ì´ì–´ì•¼ í•¨</li><li>S1 bufferì˜ ìµœì†Œ í¬ê¸°ëŠ” <code>strlen(s1) + n + 1</code>ì´ì–´ì•¼ í•¨</li><li><code>strncat()</code>ì˜ ë§ˆì§€ë§‰ ì¸ìˆ˜ëŠ” ì´ buffer lengthê°€ ì•„ë‹ˆì–´ì•¼ í•¨</li><li><code>strncat(dest, source, dest_size â€“ strlen(dest) â€“ 1)</code></li></ul></li><li>ê²°ê³¼ stringì´ ì˜ë¦´ ë•Œ status code ì—†ìŒ.</li></ul><h2 id="strncpy-s" tabindex="-1"><a class="header-anchor" href="#strncpy-s"><span><code>strncpy_s()</code></span></a></h2><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token class-name">errno_t</span> <span class="token function">strncpy_s</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">char</span> <span class="token operator">*</span> restrict s1<span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">rsize_t</span> s1max<span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> restrict s2<span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">rsize_t</span> n</span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Runtime-constraint violation ë°œìƒ ì‹œ destination arrayëŠ” empty stringìœ¼ë¡œ ì„¤ì •</li><li>Null terminator ì¶”ê°€ë¨</li><li>ì„±ê³µì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ <code>0</code> ë°˜í™˜</li><li>ì…ë ¥ ì¸ìˆ˜ê°€ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ nonzero value ë°˜í™˜</li><li>No truncation!</li><li>Example</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">char</span> src1<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">char</span> src2<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token char">&#39;g&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;o&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;o&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;y&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">char</span> dst1<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dst2<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dst3<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">errno t r1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> r3<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>r1 = strncpy_s(dst1, sizeof(dst1), src1, sizeof(src1));</code><ul><li><code>r1 = 0, dst1 = â€œhello\0â€</code></li></ul></li><li><code>r2 = strncpy_s(dst2, sizeof(dst2), src2, 4);</code><ul><li><code>r2 = 0, dst2 = â€œgood\0â€</code></li></ul></li><li><code>r3 = strncpy_s(dst3, sizeof(dst3), src1, sizeof(src1));</code><ul><li><code>r3 = nonzero value, dst3[0] = â€˜\0â€™</code></li></ul></li></ul><h2 id="summary-of-strcpy-and-strcat" tabindex="-1"><a class="header-anchor" href="#summary-of-strcpy-and-strcat"><span>Summary of <code>strcpy()</code> and <code>strcat()</code></span></a></h2><h3 id="table-2-7-truncating-copy-functions" tabindex="-1"><a class="header-anchor" href="#table-2-7-truncating-copy-functions"><span>Table 2.7. Truncating Copy Functions</span></a></h3><table><thead><tr><th></th><th>Standard/TR</th><th>Buffer Overflow Protection</th><th>Guarantees Null Termination</th><th>May Truncate String</th><th>Allocates Dynamic Memory</th><th>Checks Runtime Constraints</th></tr></thead><tbody><tr><td><code>strncpy()</code></td><td><code>C99</code></td><td>Yes</td><td>No</td><td>Yes</td><td>No</td><td>No</td></tr><tr><td><code>strlcpy()</code></td><td><code>OpenBSD</code></td><td>Yes</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td></tr><tr><td><code>strndup()</code></td><td><code>TR 24731-2</code></td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>No</td></tr><tr><td><code>strncpy_s()</code></td><td><code>C11</code></td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>Yes</td></tr></tbody></table><table><thead><tr><th></th><th>Standard/TR</th><th>Buffer Overflow Protection</th><th>Guarantees Null Termination</th><th>May Truncate String</th><th>Allocates Dynamic Memory</th><th>Checks Runtime Constraints</th></tr></thead><tbody><tr><td><code>strncat()</code></td><td><code>C99</code></td><td>Yes</td><td>No</td><td>Yes</td><td>No</td><td>No</td></tr><tr><td><code>strlcat()</code></td><td><code>OpenBSD</code></td><td>Yes</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td></tr><tr><td><code>strncat_s()</code></td><td><code>C11</code></td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>Yes</td></tr></tbody></table><h2 id="runtime-protection-strategies" tabindex="-1"><a class="header-anchor" href="#runtime-protection-strategies"><span>Runtime Protection Strategies</span></a></h2><ul><li>Programmerê°€ ë¶ˆì™„ì „í•œ detection and recovery strategyë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í–ˆë‹¤ê³  ì˜ëª»ëœ í™•ì‹ ì„ ê°€ì§ˆ ìœ„í—˜</li><li>Buffer overflow mitigation strategies <ul><li>Mitigation mechanismì„ ì œê³µí•˜ëŠ” ì‹œìŠ¤í…œì˜ componentì— ë”°ë¼ ë¶„ë¥˜ ê°€ëŠ¥ <ul><li>ê°œë°œì (ì…ë ¥ validationì„ í†µí•´)</li><li>Compiler ë° ê´€ë ¨ runtime system</li><li>Operating system</li></ul></li></ul></li></ul><h2 id="input-validation" tabindex="-1"><a class="header-anchor" href="#input-validation"><span>Input validation</span></a></h2><ul><li>Buffer overflowsë¥¼ ì™„í™”í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">char</span> buff<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">strncpy</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">/* ... */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Trust boundaryë¥¼ ë„˜ì–´ program interfaceì— ë„ë‹¬í•˜ëŠ” ëª¨ë“  ë°ì´í„°ëŠ” validation í•„ìš” <ul><li>ì˜ˆ: <code>argv</code> ë° <code>argc</code>, environment variables, <code>sockets/files/devices</code>ì—ì„œ ì½ì€ ë°ì´í„°</li></ul></li></ul><h2 id="object-size-checking" tabindex="-1"><a class="header-anchor" href="#object-size-checking"><span>Object Size Checking</span></a></h2><ul><li>GCC <ul><li>Pointerê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ì˜ í¬ê¸°ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì œí•œëœ ê¸°ëŠ¥ ì œê³µ</li><li>GCC 4.1: <code>size_t __builtin_object_size(void *ptr, int type)</code><ul><li><code>ptr</code>: ê°ì²´ì˜ ì‹œì‘ ë¶€ë¶„ì„ ê°€ë¦¬ì¼œì•¼ í•¨</li><li><code>type</code>: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>âˆ¼</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">0 \sim 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> ë˜ëŠ” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>: ì°¸ì¡°ëœ ê°ì²´ëŠ” ê°€ë¦¬í‚¤ëŠ” byteë¥¼ í¬í•¨í•˜ëŠ” ê°€ì¥ í° ê°ì²´</li><li>ê·¸ ì™¸: ê°ì²´ëŠ” ê°€ì¥ ì‘ì€ ê°ì²´</li></ul></li><li>Byte ìˆ˜ ë°˜í™˜</li></ul></li></ul></li><li>Example</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">struct</span> <span class="token class-name">V</span> <span class="token punctuation">{</span> <span class="token keyword">char</span> buf1<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">int</span> b<span class="token punctuation">;</span> <span class="token keyword">char</span> buf2<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> var<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token operator">&amp;</span>var<span class="token punctuation">.</span>b<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>__builtin_object_size(ptr, 0)</code></li><li><code>__builtin_object_size(ptr, 1)</code></li><li><code>__builtin_object_size()</code> í•¨ìˆ˜ <ul><li><code>_FORTIFY_SOURCE</code>ê°€ ì •ì˜ë  ë•Œ ì‚¬ìš© <img src="/assets/image-47-BP7PyETp.png" alt="alt text"></li></ul></li></ul><table><thead><tr><th>Value of type Argument</th><th>Operates on</th><th>If Unknown, Returns</th></tr></thead><tbody><tr><td>0</td><td>Maximum object</td><td>(size_t) -1</td></tr><tr><td>1</td><td>Minimum object</td><td>(size_t) -1</td></tr><tr><td>2</td><td>Maximum object</td><td>(size_t) 0</td></tr><tr><td>3</td><td>Minimum object</td><td>(size_t) 0</td></tr></tbody></table><ul><li>í¬ê¸° ê²°ì • ë¶ˆê°€</li><li><code>src_end</code> = <code>â€˜\0â€™</code>ë¥¼ í¬í•¨í•œ byte ìˆ˜</li><li>Example</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">char</span> dest<span class="token punctuation">[</span>BUFFER_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">char</span> <span class="token operator">*</span>src <span class="token operator">=</span> <span class="token comment">/* valid pointer */</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">size_t</span> src_end <span class="token operator">=</span> <span class="token function">__builtin_object_size</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>src_end <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token comment">/* don&#39;t know if src is too big */</span></span>
<span class="line">    <span class="token function">strlen</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token operator">&lt;</span> BUFFER_SIZE<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">strcpy</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>src_end <span class="token operator">&lt;=</span> BUFFER_SIZE<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">strcpy</span><span class="token punctuation">(</span>dest<span class="token punctuation">,</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* src would overflow dest */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="visual-studio-compiler-generated-runtime-checks" tabindex="-1"><a class="header-anchor" href="#visual-studio-compiler-generated-runtime-checks"><span>Visual Studio Compiler-Generated Runtime Checks</span></a></h2><ul><li>Visual C++ 2010 <ul><li><code>/RTCs</code> compiler flag <ul><li>Arraysì™€ ê°™ì€ local variablesì˜ overflows</li><li>ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ variables ì‚¬ìš©</li><li>Stack pointer corruption</li><li>ë“±ì˜ runtime checks í™œì„±í™”</li></ul></li><li><code>/GS</code></li><li>Pragmaë¥¼ ì‚¬ìš©í•˜ì—¬ flags ì¡°ì • ê°€ëŠ¥</li></ul></li></ul><h2 id="stack-smashing-protector-propolice" tabindex="-1"><a class="header-anchor" href="#stack-smashing-protector-propolice"><span>Stack-Smashing Protector (ProPolice)</span></a></h2><ul><li><p><code>GCC 4.1</code></p><ul><li>Stack-Smashing Protector (SSP) ê¸°ëŠ¥ ë„ì…</li><li>Buffers ë’¤ì— pointersë¥¼ ë°°ì¹˜í•˜ë„ë¡ local variables ì¬ì •ë ¬</li><li>í•¨ìˆ˜ ì¸ìˆ˜ì˜ pointersë¥¼ local variable buffers ì• ì˜ì—­ìœ¼ë¡œ ë³µì‚¬</li></ul></li><li><p>SSP</p><ul><li>Canaryë¥¼ ë„ì…í•˜ì—¬ ë³€ê²½ ì‚¬í•­ ê°ì§€</li></ul></li><li><p>SSP stack structure</p><pre><code> Stack     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â–²         
pointerâ”€â”€â–º â”‚          ...           â”‚ â”‚         
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           
           â”‚  local variables (C)   â”‚           
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           
           â”‚       arrays (B)       â”‚ â”‚         
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚         
 Frame     â”‚         guard         â”€â”¼â”€â”¼â”€â”€â”€ stack
pointerâ”€â”€â–º â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    guard
           â”‚ previous frame pointer â”‚ â”‚         
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚         
           â”‚     return address     â”‚ â”‚         
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           
           â”‚     arguments (A)      â”‚           
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           
           â”‚          ...           â”‚           
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           
</code></pre><ul><li>ìœ„ì¹˜ (A): array ë˜ëŠ” pointer variables ì—†ìŒ.</li><li>ìœ„ì¹˜ (B): arraysë¥¼ í¬í•¨í•˜ëŠ” arrays ë˜ëŠ” structures</li><li>ìœ„ì¹˜ (B) ë’¤ì— guard ë°°ì¹˜</li><li>ìœ„ì¹˜ (C): arrays ì—†ìŒ.</li><li>Stack guard</li></ul></li></ul><h2 id="operating-system-strategies" tabindex="-1"><a class="header-anchor" href="#operating-system-strategies"><span>Operating System Strategies</span></a></h2><ul><li>Address space layout randomization (ASLR) <ul><li>Arbitrary code execution ë°©ì§€</li><li>Linux, Windows Vista ì´í›„ ì‚¬ìš© ê°€ëŠ¥</li><li>ê°œë°œìëŠ” <code>/DYNAMICBASE</code> linker optionì„ ì‚¬ìš©í•˜ì—¬ ASLR ì§€ì›ì— opt in í•´ì•¼ í•¨</li></ul></li><li>Nonexecutable stacks <ul><li>ê³µê²©ìê°€ stackì—ì„œ executable codeë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ.</li></ul></li><li>W ^ X (W xor X) <ul><li>Process address spaceì˜ ì–´ë–¤ ë¶€ë¶„ë„ writableì´ë©´ì„œ executableì´ì§€ ì•ŠìŒ.</li><li>ì—¬ëŸ¬ CPUì—ì„œ No eXecute (NX) bit ì‚¬ìš©ìœ¼ë¡œ ì§€ì›</li></ul></li><li>Data Execution Prevention (DEP) <ul><li>Microsoft Visual Studioìš© W ^ X ì •ì±…ì˜ implementation</li><li>NX technologyë¥¼ ì‚¬ìš©í•˜ì—¬ data segmentsì— ì €ì¥ëœ instructionsì˜ ì‹¤í–‰ ë°©ì§€</li><li><code>/NXCOMPACT</code>ë¡œ codeë¥¼ linkí•˜ê±°ë‚˜ <code>SetProcessDEPPolicy()</code> í˜¸ì¶œë¡œ DEP í™œì„±í™”</li></ul></li><li>PaX <ul><li>Linux kernel security patch</li><li>Nonexecutable stack, ASLR ë“±</li><li>Denial of Service (DoS) ìœ ë°œ ê°€ëŠ¥</li><li>í˜„ì¬ grsecurity projectì˜ ì¼ë¶€</li></ul></li><li>StackGap <ul><li>Stack memory í• ë‹¹ ì‹œ randomly sized gap ë„ì…</li></ul></li></ul><h2 id="future-direction" tabindex="-1"><a class="header-anchor" href="#future-direction"><span>Future Direction</span></a></h2><blockquote><p>Figure 2.19. A possible Safe-Secure C/C++(SSCC) implementation <img src="/assets/image-25-C7cqF-ib.png" alt="alt text"></p></blockquote><ul><li>ê°€ëŠ¥í•œ Safe-Secure C/C++ (SSCC) implementation</li></ul><h2 id="notable-vulnerabilities" tabindex="-1"><a class="header-anchor" href="#notable-vulnerabilities"><span>Notable Vulnerabilities</span></a></h2><ul><li>Remote Login (rlogin) <ul><li>Buffer overflow: <code>TERM environment variable</code>ì„ local stack variableë¡œ ì„ ì–¸ëœ 1,024 characters arrayë¡œ ë³µì‚¬</li></ul></li><li>Kerberos <ul><li>Network authentication protocol</li><li><a href="http://web.mit.edu/Kerberos/" target="_blank" rel="noopener noreferrer">http://web.mit.edu/Kerberos/</a></li><li><code>krb_rd_req()</code> í•¨ìˆ˜ì—ì„œ buffer overflow <ul><li>ê³µê²©ìê°€ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ root access ì–»ì„ ìˆ˜ ìˆìŒ.</li></ul></li></ul></li></ul><h2 id="summary" tabindex="-1"><a class="header-anchor" href="#summary"><span>Summary</span></a></h2><ul><li>C ë° C++ì—ì„œ buffer overflowsê°€ ìì£¼ ë°œìƒí•˜ëŠ” ì´ìœ  <ol><li>Stringsë¥¼ null-terminated arrays of charactersë¡œ ì •ì˜</li><li>ì•”ë¬µì ì¸ bounds checkingì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ.</li><li>Bounds checkingì„ ê°•ì œí•˜ì§€ ì•ŠëŠ” í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸ì¶œ ì œê³µ</li></ol></li><li>ì¼ë°˜ì ì¸ ì™„í™” ì „ëµì€ ìƒˆë¡œìš´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì±„íƒ</li><li>ì‹¤ìš©ì ì¸ ì™„í™” ì „ëµì€ static analysis ë° dynamic analysis í¬í•¨</li><li>Runtime solutions <ul><li>Bounds checkers, canaries, safe libraries</li></ul></li><li>Defense-in-depth strategy</li></ul><h1 id="á„‰á…µá„’á…¥á†·-á„Œá…¥á†¼á„‡á…©" tabindex="-1"><a class="header-anchor" href="#á„‰á…µá„’á…¥á†·-á„Œá…¥á†¼á„‡á…©"><span>ì‹œí—˜ ì •ë³´</span></a></h1><p>ì¥ì†Œ: 501í˜¸</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">ìµœê·¼ ìˆ˜ì •: </span><time class="meta-item-info" datetime="2025-12-16T08:20:47.000Z" data-allow-mismatch>25. 12. 16. ì˜¤í›„ 5:20</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: kmbzn24@gmail.com">kmbzn</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><div class="vp-footer-wrapper" data-v-e24f0054><hr data-v-e24f0054><div class="vp-footer" data-v-e24f0054><p class="built-with" data-v-e24f0054>BUILT WITH</p><div class="tech-logos" data-v-e24f0054><a href="https://www.cloudflare.com/" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/cloudflare/cloudflare-original.svg" alt="Cloudflare" data-v-e24f0054></a><a href="https://nodejs.org/" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg" alt="Node.js" data-v-e24f0054></a><a href="https://github.com/kmbzn" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="GitHub" data-v-e24f0054></a><a href="https://git-scm.com/" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg" alt="Git" data-v-e24f0054></a><a href="https://vuejs.org/" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vuejs/vuejs-original.svg" alt="Vue.js" data-v-e24f0054></a><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JavaScript" data-v-e24f0054></a><a href="https://code.visualstudio.com/" target="_blank" data-v-e24f0054><img src="https://blog.kakaocdn.net/dn/lTWD3/btsMdkdWJqP/b4aSv2aa6c425THE40jKB1/img.png" alt="VSCode" data-v-e24f0054></a><a href="https://www.npmjs.com/" target="_blank" data-v-e24f0054><img src="https://upload.wikimedia.org/wikipedia/commons/d/db/Npm-logo.svg" alt="npm" data-v-e24f0054></a></div><p class="copyright" data-v-e24f0054> All trademarks and logos are property of their respective owners.<br data-v-e24f0054> Â© 2025 kmbzn Â· <a href="https://github.com/kmbzn/blog/blob/master/LICENSE" target="_blank" data-v-e24f0054>MIT License</a><br data-v-e24f0054></p></div></div><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DYuS003L.js" defer></script>
  </body>
</html>
