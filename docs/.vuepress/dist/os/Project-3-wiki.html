<!doctype html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><meta property="og:description" content="KeyBaseZone"><meta property="og:image" content="https://kmbzn.com/images/og.png"><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/android-chrome-192x192.png"><link rel="icon" type="image/png" sizes="512x512" href="/images/android-chrome-512x512.png"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/victor-mono@latest/dist/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.css"><title>Project 3: Virtual Memory & File system - wiki</title><meta name="description" content="Summarizing key concepts from CS lectures.">
    <link rel="preload" href="/assets/style-Cu47Lw8E.css" as="style"><link rel="stylesheet" href="/assets/style-Cu47Lw8E.css">
    <link rel="modulepreload" href="/assets/app-DiAjUdp1.js"><link rel="modulepreload" href="/assets/Project-3-wiki.html-cOCGYCjN.js">
    <link rel="prefetch" href="/assets/Mindscape.html-C9WauGdL.js" as="script"><link rel="prefetch" href="/assets/Musics.html-CSwkfQax.js" as="script"><link rel="prefetch" href="/assets/index.html-DKb7sVl0.js" as="script"><link rel="prefetch" href="/assets/hjangkim.html-Ci1Wc-uR.js" as="script"><link rel="prefetch" href="/assets/test.html-DbYfagzl.js" as="script"><link rel="prefetch" href="/assets/1-Linear-Algebra.html-DlRluxiq.js" as="script"><link rel="prefetch" href="/assets/10-Machine-Learning-1.html-3NVrHd8D.js" as="script"><link rel="prefetch" href="/assets/11-Machine-Learning-2.html-BrNp_fWh.js" as="script"><link rel="prefetch" href="/assets/12-Machine-Learning-3.html-Dw77aZ2-.js" as="script"><link rel="prefetch" href="/assets/13-Linear-Models.html-Cpg4UNdy.js" as="script"><link rel="prefetch" href="/assets/14-Other-Classic-ML-Models.html-DwoJcK9U.js" as="script"><link rel="prefetch" href="/assets/15-Deep-Learning-1.html-fc0qM01H.js" as="script"><link rel="prefetch" href="/assets/16-Deep-Learning-2.html-BCic-zcH.js" as="script"><link rel="prefetch" href="/assets/2-Linear-Algebra-Search.html-Dc_akdS5.js" as="script"><link rel="prefetch" href="/assets/3-Search.html-CcFH0cUF.js" as="script"><link rel="prefetch" href="/assets/4-Knowledge-Logic-1.html-BG3Mt4xo.js" as="script"><link rel="prefetch" href="/assets/5-Knowledge-Logic-2.html-KmTkk9jc.js" as="script"><link rel="prefetch" href="/assets/6-Probability.html-DhV5Uv2F.js" as="script"><link rel="prefetch" href="/assets/7-Information-Theory.html-CwrMTZEq.js" as="script"><link rel="prefetch" href="/assets/8-Probabilistic-Reasoning-2.html-Ii3AzpB2.js" as="script"><link rel="prefetch" href="/assets/9-Probabilistic-Reasoning-3.html-CR193qU_.js" as="script"><link rel="prefetch" href="/assets/midterm.html-tgjJNv_-.js" as="script"><link rel="prefetch" href="/assets/1-Course-Intro.html-CgxxM114.js" as="script"><link rel="prefetch" href="/assets/10-Character-Animation.html-FqEOi_sD.js" as="script"><link rel="prefetch" href="/assets/11-Curves.html-BJs4hxkl.js" as="script"><link rel="prefetch" href="/assets/12-More-Lighting-Texture.html-CK9sI5Uw.js" as="script"><link rel="prefetch" href="/assets/2-Rendering-Basics.html-OWDXF3IE.js" as="script"><link rel="prefetch" href="/assets/3-Transformations.html-BviEOqsU.js" as="script"><link rel="prefetch" href="/assets/4-Affine-Space-Frame_Matrix.html-Dk3kzPnP.js" as="script"><link rel="prefetch" href="/assets/5-Vertex-Processing-1.html-BxvpE6no.js" as="script"><link rel="prefetch" href="/assets/6-Vertex-Processing-2.html-Btg7Ewr5.js" as="script"><link rel="prefetch" href="/assets/7-Hierachical-Modeling-Mesh.html-DoAk0yw2.js" as="script"><link rel="prefetch" href="/assets/8-Lighting.html-D7E0gAWZ.js" as="script"><link rel="prefetch" href="/assets/9-Orientation-Rotation.html-B5rDwM22.js" as="script"><link rel="prefetch" href="/assets/Project-2.html-DATuTqu8.js" as="script"><link rel="prefetch" href="/assets/Project-3.html-Cb1HrirP.js" as="script"><link rel="prefetch" href="/assets/01.Overview.html-BMmnhxqX.js" as="script"><link rel="prefetch" href="/assets/02.ë³´ì•ˆì •ì±….html-BvfYymd4.js" as="script"><link rel="prefetch" href="/assets/03.Cryptographic_Tools.html-CpAov9pP.js" as="script"><link rel="prefetch" href="/assets/04.User_Authentification.html-EZ61n9Wp.js" as="script"><link rel="prefetch" href="/assets/05.Access_Control.html-DSkiQ033.js" as="script"><link rel="prefetch" href="/assets/06.DB_Security.html-B5J-0t9F.js" as="script"><link rel="prefetch" href="/assets/07.Malware.html-dF65u_N4.js" as="script"><link rel="prefetch" href="/assets/08.Firmware_Analysis.html-C1E5CMRg.js" as="script"><link rel="prefetch" href="/assets/24midterm.html-By5qTLKM.js" as="script"><link rel="prefetch" href="/assets/1.Introduction.html-C47g-y4Z.js" as="script"><link rel="prefetch" href="/assets/13.Data_Storage_Structures.html-YI5wMh9h.js" as="script"><link rel="prefetch" href="/assets/14.Indexing.html-DhcN19Np.js" as="script"><link rel="prefetch" href="/assets/15.Query_Processing.html-BDgud-Uk.js" as="script"><link rel="prefetch" href="/assets/16.Query_Optimization.html-Bzuz-PAz.js" as="script"><link rel="prefetch" href="/assets/2.Relational.html-FGxvg1Tt.js" as="script"><link rel="prefetch" href="/assets/2021024057.html-BM1iDF28.js" as="script"><link rel="prefetch" href="/assets/3.SQL-1.html-DzrCINDA.js" as="script"><link rel="prefetch" href="/assets/6.E-R_Model.html-BvOeHUqp.js" as="script"><link rel="prefetch" href="/assets/7.Relational_Database_Design-1.html-DsLJNR0F.js" as="script"><link rel="prefetch" href="/assets/7.Relational_Database_Design-2.html-8q-MR0pl.js" as="script"><link rel="prefetch" href="/assets/Assignment2-1.html-DTGNv6wG.js" as="script"><link rel="prefetch" href="/assets/Assignment2-2.html-Bq9XJWGA.js" as="script"><link rel="prefetch" href="/assets/Assignment3.html-7MnFNlB3.js" as="script"><link rel="prefetch" href="/assets/LAB06.html-DqujdcEz.js" as="script"><link rel="prefetch" href="/assets/LAB08.html-DDx6PlJW.js" as="script"><link rel="prefetch" href="/assets/wiki.html-Cl0C1gRd.js" as="script"><link rel="prefetch" href="/assets/Bitcoin.html-whayWvy8.js" as="script"><link rel="prefetch" href="/assets/4.html-P_Nu2ThJ.js" as="script"><link rel="prefetch" href="/assets/5.html-CVmgft97.js" as="script"><link rel="prefetch" href="/assets/6.html-s0ho8XGk.js" as="script"><link rel="prefetch" href="/assets/7.html-CIqjZWkw.js" as="script"><link rel="prefetch" href="/assets/8.html-ekcKxKq5.js" as="script"><link rel="prefetch" href="/assets/saja.html-DPf3O_Nu.js" as="script"><link rel="prefetch" href="/assets/1018.html-BQ-z8N47.js" as="script"><link rel="prefetch" href="/assets/1966.html-Xtj-P-rg.js" as="script"><link rel="prefetch" href="/assets/PythonTimeout.html-32FYlrhy.js" as="script"><link rel="prefetch" href="/assets/aloha_6.html-BJ52mT6c.js" as="script"><link rel="prefetch" href="/assets/std-vector.html-Cds37cso.js" as="script"><link rel="prefetch" href="/assets/vim.html-BZOtA-08.js" as="script"><link rel="prefetch" href="/assets/Nordvik.html-BKiS8sNn.js" as="script"><link rel="prefetch" href="/assets/NorthSentinelIsland.html-CYLutt5T.js" as="script"><link rel="prefetch" href="/assets/Rongorongo.html-DnmHm8rK.js" as="script"><link rel="prefetch" href="/assets/10.VirtualMemory-1.html-Du8ODbvd.js" as="script"><link rel="prefetch" href="/assets/11.VirtualMemory-2.html-jb4YIPal.js" as="script"><link rel="prefetch" href="/assets/12.FileSystem.html-csAKoeSH.js" as="script"><link rel="prefetch" href="/assets/13.MassStorageManagement.html-OVXnSSu3.js" as="script"><link rel="prefetch" href="/assets/14.IOSystems.html-zfnrgjW5.js" as="script"><link rel="prefetch" href="/assets/7.Deadlocks.html-CSbDHus2.js" as="script"><link rel="prefetch" href="/assets/8.MemoryManagement-1.html-C0Bcopl7.js" as="script"><link rel="prefetch" href="/assets/9.MemoryManagement-2.html-GfQ2p-yS.js" as="script"><link rel="prefetch" href="/assets/Project-2-test-code.html-CwL7a5G9.js" as="script"><link rel="prefetch" href="/assets/Project-2.html-DUYz5cwt.js" as="script"><link rel="prefetch" href="/assets/Project-3-ko.html-D0BN2WIs.js" as="script"><link rel="prefetch" href="/assets/Project-3.html-BQZcbwO0.js" as="script"><link rel="prefetch" href="/assets/wiki.html-7cS_CimX.js" as="script"><link rel="prefetch" href="/assets/13-FPL(1).html-DI5cW3--.js" as="script"><link rel="prefetch" href="/assets/10-Object-Oriented-Analysis.html-DWBHAb9u.js" as="script"><link rel="prefetch" href="/assets/11-Object-Oriented-Design.html-CfQ4rA9N.js" as="script"><link rel="prefetch" href="/assets/12-DesignPatterns.html-BRu6hDTD.js" as="script"><link rel="prefetch" href="/assets/13-Intro-To-QA-Testing.html-BrmZp5bv.js" as="script"><link rel="prefetch" href="/assets/2-IntroToSE.html-CQ_5M2M5.js" as="script"><link rel="prefetch" href="/assets/3-Process.html-CqSiUKDS.js" as="script"><link rel="prefetch" href="/assets/4-ProcessModels.html-1lWy2nxL.js" as="script"><link rel="prefetch" href="/assets/5-Agile.html-K5aSVwOP.js" as="script"><link rel="prefetch" href="/assets/6-Requirements.html-mTbosVen.js" as="script"><link rel="prefetch" href="/assets/7-Requirements-2.html-DQKJ6bh1.js" as="script"><link rel="prefetch" href="/assets/8-Architecture.html-DHdirk5u.js" as="script"><link rel="prefetch" href="/assets/9-UML.html-3GmiHwkb.js" as="script"><link rel="prefetch" href="/assets/ExtraVirginOliveOil.html-CrCWLJtU.js" as="script"><link rel="prefetch" href="/assets/PsylliumHusk.html-UsHkd0EM.js" as="script"><link rel="prefetch" href="/assets/404.html-BnHiKzmD.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/images/kbz.png" alt><!----></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><!----><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/Mindscape.html" aria-label="Mindscape ğŸ”¥"><!--[--><!--[--><!--]--><!--]-->Mindscape ğŸ”¥<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Musics.html" aria-label="Playlist ğŸ§"><!--[--><!--[--><!--]--><!--]-->Playlist ğŸ§<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ¤– Artifical Intelligence <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/ai/1-Linear-Algebra.html" aria-label="1. Basics; Linear Algebra"><!--[--><!--[--><!--]--><!--]-->1. Basics; Linear Algebra<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/2-Linear-Algebra-Search.html" aria-label="2. Basics; Linear Algebra (2), Search (1)"><!--[--><!--[--><!--]--><!--]-->2. Basics; Linear Algebra (2), Search (1)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/3-Search.html" aria-label="3. Search (2)"><!--[--><!--[--><!--]--><!--]-->3. Search (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/4-Knowledge-Logic-1.html" aria-label="4. Knowledge and Logic (1)"><!--[--><!--[--><!--]--><!--]-->4. Knowledge and Logic (1)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/5-Knowledge-Logic-2.html" aria-label="5. Knowledge and Logic (2)"><!--[--><!--[--><!--]--><!--]-->5. Knowledge and Logic (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/6-Probability.html" aria-label="6. Probability"><!--[--><!--[--><!--]--><!--]-->6. Probability<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/7-Information-Theory.html" aria-label="7. Information Theory"><!--[--><!--[--><!--]--><!--]-->7. Information Theory<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/8-Probabilistic-Reasoning-2.html" aria-label="8. Probabilitc Reasoning (2)"><!--[--><!--[--><!--]--><!--]-->8. Probabilitc Reasoning (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/9-Probabilistic-Reasoning-3.html" aria-label="9. Probabilitc Reasoning (3)"><!--[--><!--[--><!--]--><!--]-->9. Probabilitc Reasoning (3)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/10-Machine-Learning-1.html" aria-label="10. Machine Learning (1)"><!--[--><!--[--><!--]--><!--]-->10. Machine Learning (1)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/11-Machine-Learning-2.html" aria-label="11. Machine Learning (2)"><!--[--><!--[--><!--]--><!--]-->11. Machine Learning (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/12-Machine-Learning-3.html" aria-label="12. Machine Learning (3)"><!--[--><!--[--><!--]--><!--]-->12. Machine Learning (3)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/13-Linear-Models.html" aria-label="13. Linear Models"><!--[--><!--[--><!--]--><!--]-->13. Linear Models<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/14-Other-Classic-ML-Models.html" aria-label="14. Other Classic ML Models (1)"><!--[--><!--[--><!--]--><!--]-->14. Other Classic ML Models (1)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/15-Deep-Learning-1.html" aria-label="15. Other Classic ML Models (2)"><!--[--><!--[--><!--]--><!--]-->15. Other Classic ML Models (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ai/16-Deep-Learning-2.html" aria-label="16. Neural Networks and Deep Learning (2)"><!--[--><!--[--><!--]--><!--]-->16. Neural Networks and Deep Learning (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ”’ Computer Security <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/cs/01.Overview.html" aria-label="01. Overview"><!--[--><!--[--><!--]--><!--]-->01. Overview<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cs/02.%EB%B3%B4%EC%95%88%EC%A0%95%EC%B1%85.html" aria-label="02. ì •ë³´ë³´ì•ˆì •ì±… ë° ë²•ê·œ"><!--[--><!--[--><!--]--><!--]-->02. ì •ë³´ë³´ì•ˆì •ì±… ë° ë²•ê·œ<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cs/03.Cryptographic_Tools.html" aria-label="03. Cryptographic Tools"><!--[--><!--[--><!--]--><!--]-->03. Cryptographic Tools<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cs/04.User_Authentification.html" aria-label="04. User Authentication"><!--[--><!--[--><!--]--><!--]-->04. User Authentication<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cs/05.Access_Control.html" aria-label="05. Access Control"><!--[--><!--[--><!--]--><!--]-->05. Access Control<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cs/06.DB_Security.html" aria-label="06. Database Security"><!--[--><!--[--><!--]--><!--]-->06. Database Security<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cs/07.Malware.html" aria-label="07. Malicious Software"><!--[--><!--[--><!--]--><!--]-->07. Malicious Software<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/cs/08.Firmware_Analysis.html" aria-label="08. Firmware Analysis"><!--[--><!--[--><!--]--><!--]-->08. Firmware Analysis<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ—„ï¸ Database System <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/db/1.Introduction.html" aria-label="1. Introduction"><!--[--><!--[--><!--]--><!--]-->1. Introduction<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/2.Relational.html" aria-label="2. Relational Model"><!--[--><!--[--><!--]--><!--]-->2. Relational Model<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/3.SQL-1.html" aria-label="3. SQL"><!--[--><!--[--><!--]--><!--]-->3. SQL<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/6.E-R_Model.html" aria-label="6. E-R Model"><!--[--><!--[--><!--]--><!--]-->6. E-R Model<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/7.Relational_Database_Design-1.html" aria-label="7. Relational Database Design (1)"><!--[--><!--[--><!--]--><!--]-->7. Relational Database Design (1)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/7.Relational_Database_Design-2.html" aria-label="7. Relational Database Design (2)"><!--[--><!--[--><!--]--><!--]-->7. Relational Database Design (2)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/13.Data_Storage_Structures.html" aria-label="13. Data Storage Structures"><!--[--><!--[--><!--]--><!--]-->13. Data Storage Structures<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/14.Indexing.html" aria-label="14. Indexing"><!--[--><!--[--><!--]--><!--]-->14. Indexing<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/db/15.Query_Processing.html" aria-label="15. Query Processing"><!--[--><!--[--><!--]--><!--]-->15. Query Processing<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ“ Software Engineering <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/se/2-IntroToSE.html" aria-label="2. Introduction to Software Engineering"><!--[--><!--[--><!--]--><!--]-->2. Introduction to Software Engineering<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/3-Process.html" aria-label="3. Process"><!--[--><!--[--><!--]--><!--]-->3. Process<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/4-ProcessModels.html" aria-label="4. Process Models"><!--[--><!--[--><!--]--><!--]-->4. Process Models<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/5-Agile.html" aria-label="5. Agile"><!--[--><!--[--><!--]--><!--]-->5. Agile<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/6-Requirements.html" aria-label="6. Requirements"><!--[--><!--[--><!--]--><!--]-->6. Requirements<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/7-Requirements-2.html" aria-label="7. Requirements Elicitation and Documentation"><!--[--><!--[--><!--]--><!--]-->7. Requirements Elicitation and Documentation<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/8-Architecture.html" aria-label="8. Architecture"><!--[--><!--[--><!--]--><!--]-->8. Architecture<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/9-UML.html" aria-label="9. Unified Modelling Language"><!--[--><!--[--><!--]--><!--]-->9. Unified Modelling Language<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/10-Object-Oriented-Analysis.html" aria-label="10. Object-Oriented Analysis"><!--[--><!--[--><!--]--><!--]-->10. Object-Oriented Analysis<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/11-Object-Oriented-Design.html" aria-label="11. Object-Oriented Design"><!--[--><!--[--><!--]--><!--]-->11. Object-Oriented Design<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/12-DesignPatterns.html" aria-label="12. Design Patterns"><!--[--><!--[--><!--]--><!--]-->12. Design Patterns<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/se/13-Intro-To-QA-Testing.html" aria-label="13. Intro to QA Testing"><!--[--><!--[--><!--]--><!--]-->13. Intro to QA Testing<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ§  Algorithm <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/algorithm/PythonTimeout.html" aria-label="Python ì‹œê°„ ì´ˆê³¼ ë°©ì§€ë¥¼ ìœ„í•œ íŒ"><!--[--><!--[--><!--]--><!--]-->Python ì‹œê°„ ì´ˆê³¼ ë°©ì§€ë¥¼ ìœ„í•œ íŒ<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/algorithm/std-vector.html" aria-label="C++ std::vector ì‚¬ìš©ë²• ì •ë¦¬"><!--[--><!--[--><!--]--><!--]-->C++ std::vector ì‚¬ìš©ë²• ì •ë¦¬<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/algorithm/vim.html" aria-label="Vim ì‚¬ìš© ë§¤ë‰´ì–¼"><!--[--><!--[--><!--]--><!--]-->Vim ì‚¬ìš© ë§¤ë‰´ì–¼<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/algorithm/1018.html" aria-label="1018ë²ˆ: ì²´ìŠ¤íŒ ë‹¤ì‹œ ì¹ í•˜ê¸°"><!--[--><!--[--><!--]--><!--]-->1018ë²ˆ: ì²´ìŠ¤íŒ ë‹¤ì‹œ ì¹ í•˜ê¸°<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/algorithm/1966.html" aria-label="1966ë²ˆ: í”„ë¦°í„° í"><!--[--><!--[--><!--]--><!--]-->1966ë²ˆ: í”„ë¦°í„° í<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page" data-v-e24f0054><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="project-3-virtual-memory-file-system-wiki" tabindex="-1"><a class="header-anchor" href="#project-3-virtual-memory-file-system-wiki"><span>Project 3: Virtual Memory &amp; File system - wiki</span></a></h1><h2 id="_1-design" tabindex="-1"><a class="header-anchor" href="#_1-design"><span>1. Design</span></a></h2><h3 id="_1-1-project-overview" tabindex="-1"><a class="header-anchor" href="#_1-1-project-overview"><span>1.1. Project overview</span></a></h3><p>ì´ wikiëŠ” xv6-riscv ê¸°ë°˜ ìš´ì˜ì²´ì œì— ê°€ìƒ ë©”ëª¨ë¦¬ì™€ íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ëŠ¥ì„ í™•ì¥í•œ ê³¼ì •ì„ ì •ë¦¬í•œë‹¤.<br> ë³¸ Projectì˜ ëª©í‘œëŠ” ë©”ëª¨ë¦¬ íš¨ìœ¨Â·ì €ì¥ ìš©ëŸ‰Â·íŒŒì¼ ì°¸ì¡° ìœ ì—°ì„±ì„ ê°œì„ í•˜ëŠ” ê²ƒì´ë‹¤.</p><ul><li>copy-on-write(COW) fork <ul><li>ê¸°ì¡´ xv6ëŠ” <code>fork</code> ì‹œ ì‚¬ìš©ì ë©”ëª¨ë¦¬ë¥¼ ì „ë¶€ ë³µì‚¬ â†’ ê³¼ë„í•œ ë©”ëª¨ë¦¬ ì†Œë¹„</li><li>í•´ê²°: parent-childê°€ pageë¥¼ ê³µìœ í•˜ê³  <strong>ì²« write ì‹œì—ë§Œ ë³µì‚¬</strong></li></ul></li><li>large file support <ul><li>ìµœëŒ€ <code>268 KB</code> í•œê³„(12 direct + 1 indirect)</li><li>í•´ê²°: <strong>double-indirect</strong> ë ˆì´ì•„ì›ƒ ë„ì… â†’ ì•½ 66 MBê¹Œì§€ íŒŒì¼ ìƒì„±Â·ì ‘ê·¼ ê°€ëŠ¥</li></ul></li><li>symbolic link <ul><li>hard linkë§Œ ì œê³µ, ê²½ë¡œ-ê¸°ë°˜ ë§í¬ê°€ ë¶€ì¬</li><li>í•´ê²°: <strong>UNIX-style symlink</strong> êµ¬í˜„ + link-chain í•´ì„(ê¹Šì´ ì œí•œ 10ë‹¨ê³„)</li></ul></li></ul><table><thead><tr><th>ê¸°ëŠ¥</th><th>ê¸°ì¡´ í•œê³„</th><th>í™•ì¥ ëª©í‘œ</th></tr></thead><tbody><tr><td>Copy-on-Write</td><td><code>fork</code> ì‹œ ì „ì²´ ë©”ëª¨ë¦¬ ë³µì‚¬</td><td>ê³µìœ  í›„ ì²« write ë•Œë§Œ ë³µì‚¬</td></tr><tr><td>Large file</td><td><code>268 KB</code> ìµœëŒ€ í¬ê¸°</td><td><code>66 MB</code> ì§€ì›(double-indirect)</td></tr><tr><td>Symbolic link</td><td>hard linkë§Œ ì§€ì›</td><td>ê²½ë¡œ ê¸°ë°˜ symlink + loop ë°©ì§€</td></tr></tbody></table><p>ë³¸ êµ¬í˜„ì€ xv6ì˜ ì›í˜• êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë©´ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ê¸°ëŠ¥ì„ í™•ì¥í•˜ì˜€ìœ¼ë©°, ê° ê¸°ëŠ¥ë³„ í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ì„ í†µí•´ ì•ˆì •ì„±ê³¼ ì •í™•ì„±ì„ í™•ì¸í•˜ì˜€ë‹¤.<br> ì´ wikiëŠ” <strong>í…ŒìŠ¤íŠ¸ ì„¤ëª… â†’ êµ¬í˜„ ì„¸ë¶€ ì‚¬í•­ â†’ ê²°ê³¼ ë° ë¬¸ì œ í•´ê²°</strong> ìˆœì„œë¡œ ì„œìˆ í•´ ìµœì¢… ì™„ì„±ë„ë¥¼ ì…ì¦í•˜ê²Œ ëœë‹¤.</p><hr><h3 id="_1-2-design-principles-and-requirement-strategy" tabindex="-1"><a class="header-anchor" href="#_1-2-design-principles-and-requirement-strategy"><span>1.2. Design principles and requirement strategy</span></a></h3><h3 id="_1-2-1-on-demand-page-duplication" tabindex="-1"><a class="header-anchor" href="#_1-2-1-on-demand-page-duplication"><span>1.2.1. On-demand page duplication</span></a></h3><ul><li><code>uvmcopy</code>ì—ì„œ writable pageì˜ <code>PTE_W</code>ë¥¼ ì œê±°í•˜ê³  <code>PTE_COW</code>ë¥¼ ì„¸íŒ…í•´ parent, childê°€ ê°™ì€ physical pageë¥¼ read-onlyë¡œ ê³µìœ í•œë‹¤.</li><li>write faultëŠ” <code>usertrap</code>ì—ì„œ ê°ì§€í•˜ë©°, <code>ref-count &gt; 1</code>ì´ë©´ ìƒˆ pageë¥¼ <code>kalloc</code> í›„ ë³µì‚¬, <code>ref-count == 1</code>ì´ë©´ <code>flag</code>ë§Œ ê°±ì‹ í•´ write-enable í•œë‹¤.</li></ul><h3 id="_1-2-2-page-reference-accounting" tabindex="-1"><a class="header-anchor" href="#_1-2-2-page-reference-accounting"><span>1.2.2. Page reference accounting</span></a></h3><ul><li><code>ref_counts[PHYSTOP/PGSIZE]</code> ì „ì—­ ë°°ì—´ë¡œ ëª¨ë“  physical page ì‚¬ìš© ê°œìˆ˜ë¥¼ ì¶”ì í•œë‹¤.</li><li><code>inc_ref</code> / <code>kfree</code>ë¡œ ì¦ê°€Â·ê°ì†Œí•˜ë©° 0ì¼ ë•Œë§Œ free listì— ë°˜í™˜í•´ leakì„ ë°©ì§€í•œë‹¤.</li></ul><h3 id="_1-2-3-tlb-consistency-on-permission-change" tabindex="-1"><a class="header-anchor" href="#_1-2-3-tlb-consistency-on-permission-change"><span>1.2.3. TLB consistency on permission change</span></a></h3><ul><li>RISC-Vì—ëŠ” x86 CR0.WPê°€ ì—†ìœ¼ë¯€ë¡œ, write-protect í›„ ë°˜ë“œì‹œ <code>sfence_vma</code>ë¥¼ í˜¸ì¶œí•´ ì‚¬ìš©ì TLBë¥¼ flushí•œë‹¤.</li></ul><h3 id="_1-2-4-double-indirect-block-layout" tabindex="-1"><a class="header-anchor" href="#_1-2-4-double-indirect-block-layout"><span>1.2.4. Double-indirect block layout</span></a></h3><ul><li><code>NDIRECT</code>ë¥¼ 11ë¡œ ì¤„ì´ê³  <code>addrs[11]</code> (single), <code>addrs[12]</code> (double) ë‘ í¬ì¸í„°ë¥¼ ì˜ˆì•½í•œë‹¤.</li><li><code>bmap</code>ëŠ” three-tier lookup (direct â†’ single â†’ double) ë¡œì§ì„ ê°€ì§„ë‹¤.</li><li><code>MAXFILE = 11 + 256 + 256Â²</code> ê³„ì‚°ìœ¼ë¡œ bigfile í…ŒìŠ¤íŠ¸(65 803 blocks)ë¥¼ ì»¤ë²„í•œë‹¤.</li></ul><h3 id="_1-2-5-metadata-integrity-via-write-ahead-logging" tabindex="-1"><a class="header-anchor" href="#_1-2-5-metadata-integrity-via-write-ahead-logging"><span>1.2.5. Metadata integrity via write-ahead logging</span></a></h3><ul><li>indirect í…Œì´ë¸”ì„ ìˆ˜ì •í•  ë•Œë§ˆë‹¤ <code>log_write(bp)</code> í˜¸ì¶œ í›„ <code>brelse(bp)</code>ë¡œ í•´ì œí•´ log ì¼ê´€ì„±ì„ ë³´ì¥í•œë‹¤.</li></ul><h3 id="_1-2-6-safe-truncation-path" tabindex="-1"><a class="header-anchor" href="#_1-2-6-safe-truncation-path"><span>1.2.6. Safe truncation path</span></a></h3><ul><li><code>itrunc</code>ëŠ” direct â†’ single â†’ double ì„¸ ë‹¨ê³„ì— ëŒ€í•´ ì—­ìˆœìœ¼ë¡œ <code>bfree</code>ë¥¼ í˜¸ì¶œí•´ orphan blockì„ ë‚¨ê¸°ì§€ ì•ŠëŠ”ë‹¤.</li></ul><h3 id="_1-2-7-path-level-symbolic-link" tabindex="-1"><a class="header-anchor" href="#_1-2-7-path-level-symbolic-link"><span>1.2.7. Path-level symbolic link</span></a></h3><ul><li>ìƒˆë¡œìš´ inode type <code>T_SYMLINK</code>ì„ ì¶”ê°€í•˜ê³ , link íŒŒì¼ì— target ê²½ë¡œ ë¬¸ìì—´ì„ ì €ì¥í•œë‹¤.</li><li><code>sys_open</code>ì€ ìµœëŒ€ <code>MAX_SYMLINK_LOOPS (10)</code> ê¹Šì´ê¹Œì§€ ì¬ê·€ í•´ì„í•˜ë©°, <code>O_NOFOLLOW</code>ê°€ ìˆìœ¼ë©´ ë§í¬ ìì²´ë¥¼ ì—°ë‹¤.</li></ul><h3 id="_1-2-8-loop-and-broken-link-defense" tabindex="-1"><a class="header-anchor" href="#_1-2-8-loop-and-broken-link-defense"><span>1.2.8. Loop and broken-link defense</span></a></h3><ul><li>depth ì¹´ìš´í„°ë¡œ ìˆœí™˜ ë§í¬ë¥¼ ì°¨ë‹¨í•˜ê³ , target ë¯¸ì¡´ì¬ ì‹œ open ì‹¤íŒ¨ë¥¼ ë°˜í™˜í•œë‹¤.</li></ul><h3 id="_1-2-9-concurrency-safety" tabindex="-1"><a class="header-anchor" href="#_1-2-9-concurrency-safety"><span>1.2.9. Concurrency safety</span></a></h3><ul><li>symlink ìƒì„±Â·ì‚­ì œëŠ” <code>begin_op()/end_op()</code> íŠ¸ëœì­ì…˜ ë‚´ë¶€ì—ì„œ inode lockì„ ëê¹Œì§€ ìœ ì§€í•´ race conditionì„ ë°©ì§€í•œë‹¤.</li></ul><hr><h3 id="_1-3-design-key-summary" tabindex="-1"><a class="header-anchor" href="#_1-3-design-key-summary"><span>1.3. Design key summary</span></a></h3><table><thead><tr><th>Element</th><th>Implementation strategy summary</th></tr></thead><tbody><tr><td>Page sharing</td><td><code>uvmcopy</code> â†’ <code>PTE_COW</code> flag + read-only</td></tr><tr><td>Fault handling</td><td><code>usertrap</code> branch for <code>scause==store fault</code></td></tr><tr><td>Ref count</td><td><code>inc_ref</code>, <code>get_ref</code>, <code>kfree</code> guard == 0</td></tr><tr><td>Double-indirect layout</td><td><code>addrs[NDIRECT+2]</code> + 3-level <code>bmap</code></td></tr><tr><td>MAXFILE ê³„ì‚°</td><td><code>11 + 256 + 256Â² = 65 803</code> blocks</td></tr><tr><td>Log consistency</td><td>ê° level ë³€ê²½ ì§í›„ <code>log_write(bp)</code></td></tr><tr><td>Symlink syscall</td><td><code>sys_symlink(target, path)</code> + <code>T_SYMLINK</code> inode</td></tr><tr><td>Link resolution</td><td><code>sys_open</code> loop, depth â‰¤ 10, <code>O_NOFOLLOW</code> support</td></tr><tr><td>Concurrency</td><td>inode lock + write-ahead log around link ops</td></tr></tbody></table><p>ì´ ì„¤ê³„ì— ë”°ë¼ COW, large file, symbolic link ì„¸ ê¸°ëŠ¥ì„ <strong>ê¸°ì¡´ xv6 ì½”ë“œì™€ í˜¸í™˜</strong>ë˜ë„ë¡ í†µí•©í–ˆìœ¼ë©°, ê°ê° <code>cowtest</code>, <code>bigfile</code>, <code>symlinktest</code>ë¥¼ ì™„ì „ í†µê³¼í•˜ê³  ëª©í‘œ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ê²Œ ëœë‹¤.</p><h2 id="_2-test-á„‘á…¡á„‹á…µá†¯á„‹á…¦-á„ƒá…¢á„’á…¡á†«-á„‰á…¥á†¯á„†á…§á†¼" tabindex="-1"><a class="header-anchor" href="#_2-test-á„‘á…¡á„‹á…µá†¯á„‹á…¦-á„ƒá…¢á„’á…¡á†«-á„‰á…¥á†¯á„†á…§á†¼"><span>2. TEST íŒŒì¼ì— ëŒ€í•œ ì„¤ëª…</span></a></h2><h3 id="_2-1-user-cowtest-c" tabindex="-1"><a class="header-anchor" href="#_2-1-user-cowtest-c"><span>2.1. <code>/user/cowtest.c</code></span></a></h3><p>ì´ í”„ë¡œê·¸ë¨ì€ copy-on-write fork ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” user space í”„ë¡œê·¸ë¨ì´ë‹¤.</p><p>ì£¼ìš” í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li><p><code>simpletest</code><br> ì „ì²´ physical memoryì˜ 2/3 ê°€ëŸ‰ì„ <code>sbrk</code>ë¡œ í• ë‹¹í•˜ê³  <code>fork</code>ë¥¼ ìˆ˜í–‰í•˜ì—¬, parentì™€ childê°€ pageë¥¼ ê³µìœ í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. copy-on-writeì´ êµ¬í˜„ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ <code>fork</code> ì‹¤íŒ¨ê°€ ë°œìƒí•œë‹¤.</p></li><li><p><code>threetest</code><br> 3ê°œì˜ processê°€ ê°ì COW pageì— writeë¥¼ ìˆ˜í–‰í•˜ë©° ì‹¤ì œë¡œ pageê°€ copyë˜ê³  freeë˜ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤. ë‚´ìš© ë¶ˆì¼ì¹˜ë‚˜ memory leakì´ ì—†ì–´ì•¼ í†µê³¼ëœë‹¤.</p></li><li><p><code>filetest</code><br><code>pipe</code>ì™€ <code>fork</code>ë¥¼ í†µí•´ <code>copyout</code> ë™ì‘ ì¤‘ page faultê°€ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ëŠ”ì§€ë¥¼ ê²€ì¦í•œë‹¤. parentì˜ <code>buf</code>ê°€ childì— ì˜í•´ ì˜¤ì—¼ë˜ì§€ ì•Šì•„ì•¼ ì„±ê³µì´ë‹¤.</p></li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line">uint64 phys_size <span class="token operator">=</span> PHYSTOP <span class="token operator">-</span> KERNBASE<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token punctuation">(</span>phys_size <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">char</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token function">sbrk</span><span class="token punctuation">(</span>sz<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">int</span> pid <span class="token operator">=</span> <span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ í…ŒìŠ¤íŠ¸ë“¤ì€ <code>fork</code>ì˜ ì„±ëŠ¥ ìµœì í™”ì™€ memory isolationì˜ ì •í™•ì„±ì„ ì ê²€í•˜ëŠ” ë° í•µì‹¬ì ì¸ ì—­í• ì„ í•œë‹¤.</p><hr><h3 id="_2-2-user-bigfile-c" tabindex="-1"><a class="header-anchor" href="#_2-2-user-bigfile-c"><span>2.2. <code>/user/bigfile.c</code></span></a></h3><p>ì´ í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ì€ xv6 íŒŒì¼ systemì—ì„œ large fileì„ ìƒì„±í•˜ê³ , ë°ì´í„°ë¥¼ block ë‹¨ìœ„ë¡œ ì—°ì†ì ìœ¼ë¡œ ì“°ê³  <code>read</code>í•˜ì—¬ data integrityë¥¼ ê²€ì¦í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.</p><p>ì£¼ìš” ë™ì‘ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li><code>&quot;big.file&quot;</code>ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ fileì„ <code>O_CREATE | O_WRONLY</code> flagë¥¼ ì‚¬ìš©í•´ <code>open</code>í•˜ê³  <code>write</code>ë¥¼ ìˆ˜í–‰í•œë‹¤.</li><li>block í¬ê¸°(<code>BSIZE</code>)ë§Œí¼ <code>buf</code>ë¥¼ ì¤€ë¹„í•˜ê³ , ê° blockì— ë²ˆí˜¸ë¥¼ ê¸°ë¡í•œ í›„ ë°˜ë³µì ìœ¼ë¡œ fileì— ì“´ë‹¤.</li><li>ì´ <code>65803</code>ê°œì˜ blockì´ writeë˜ì–´ì•¼ í•˜ë©°, ì¤‘ê°„ë§ˆë‹¤ ì§„í–‰ ìƒí™©ì„ ì¶œë ¥í•œë‹¤.</li><li>write ì™„ë£Œ í›„ fileì„ <code>close</code>í•˜ê³  <code>O_RDONLY</code> flagë¡œ ë‹¤ì‹œ <code>open</code>í•˜ì—¬ <code>read</code>ë¥¼ ìˆ˜í–‰í•˜ê³ , ì €ì¥ëœ ê°’ì´ block ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦í•œë‹¤.</li><li>ëª¨ë“  ê²€ì‚¬ê°€ í†µê³¼ë˜ë©´ ì„±ê³µ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê³  <code>exit</code>í•œë‹¤.</li></ul><p>ì´ í…ŒìŠ¤íŠ¸ëŠ” doubly-indirect block ê¸°ëŠ¥ì´ ì ìš©ëœ file systemì´ ì‹¤ì œë¡œ large fileì„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ë° ëª©ì ì´ ìˆë‹¤.</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line">fd <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;big.file&quot;</span><span class="token punctuation">,</span> O_CREATE <span class="token operator">|</span> O_WRONLY<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>buf <span class="token operator">=</span> blocks<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">int</span> cc <span class="token operator">=</span> <span class="token function">write</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span>cc <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">  blocks<span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_2-3-user-symlinktest-c" tabindex="-1"><a class="header-anchor" href="#_2-3-user-symlinktest-c"><span>2.3. <code>/user/symlinktest.c</code></span></a></h3><p>ì´ í”„ë¡œê·¸ë¨ì€ symbolic link ê¸°ëŠ¥ì„ ê²€ì¦í•˜ëŠ” user space í…ŒìŠ¤íŠ¸ í”„ë¡œê·¸ë¨ì´ë‹¤.</p><p>ì£¼ìš” í…ŒìŠ¤íŠ¸ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li><p><code>testsymlink</code><br><code>testsymlink</code> ë””ë ‰í„°ë¦¬ë¥¼ ë§Œë“¤ê³ , fileì„ í•˜ë‚˜ ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  <code>symlink</code> system callì„ ì´ìš©í•´ í•´ë‹¹ fileì„ targetìœ¼ë¡œ í•˜ëŠ” link fileì„ ìƒì„±í•œë‹¤. ì´í›„ <code>read</code> ë™ì‘ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , linkê°€ <code>T_SYMLINK</code> íƒ€ì…ìœ¼ë¡œ ì¸ì‹ë˜ëŠ”ì§€ë„ <code>stat</code>ìœ¼ë¡œ ê²€ì¦í•œë‹¤.<br> ì´í›„ ì›ë³¸ fileì„ <code>unlink</code>í•œ ë’¤ broken linkì— ì ‘ê·¼ì´ ì°¨ë‹¨ë˜ëŠ”ì§€, ë‹¤ì‹œ ì›í˜• loop êµ¬ì¡°ë¥¼ ê°–ëŠ” linkë¥¼ ë§Œë“¤ì—ˆì„ ë•Œ <code>open</code> ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.<br> ë§ˆì§€ë§‰ìœ¼ë¡œ ì—¬ëŸ¬ ë‹¨ê³„ì˜ link chainì„ ìƒì„±í•œ ë’¤, chainì˜ ì‹œì‘ì ì„ í†µí•´ ë fileì— ì ‘ê·¼ ê°€ëŠ¥í•œì§€ë„ ê²€ì‚¬í•œë‹¤.</p></li><li><p><code>concur</code><br> ì—¬ëŸ¬ processê°€ ë™ì‹œì— <code>symlink</code>ë¥¼ ìƒì„±í•˜ê³  <code>unlink</code>ë¥¼ ë°˜ë³µí•˜ëŠ” ìƒí™©ì„ ë§Œë“¤ì–´ race conditionì´ë‚˜ consistency ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ì§€ ê²€ì¦í•œë‹¤. ê° processëŠ” ë™ì¼í•œ <code>target</code>ì— ëŒ€í•´ ë°˜ë³µì ìœ¼ë¡œ <code>symlink</code>/<code>unlink</code>ë¥¼ ìˆ˜í–‰í•œë‹¤.</p></li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line">r <span class="token operator">=</span> <span class="token function">symlink</span><span class="token punctuation">(</span><span class="token string">&quot;/testsymlink/a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/testsymlink/b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span>type <span class="token operator">!=</span> T_SYMLINK<span class="token punctuation">)</span></span>
<span class="line">  <span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;not a symlink&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ testëŠ” symbolic linkì˜ ìƒì„±, ì‚­ì œ, ê²½ë¡œ í•´ì„, cycle ì²˜ë¦¬, broken link ë° ë™ì‹œ ì ‘ê·¼ ë¬¸ì œë¥¼ ì¢…í•©ì ìœ¼ë¡œ ê²€ì¦í•˜ê²Œ ëœë‹¤.</p><h2 id="_3-implementation" tabindex="-1"><a class="header-anchor" href="#_3-implementation"><span>3. Implementation</span></a></h2><h3 id="_3-1-copy-on-write-fork-á„€á…®á„’á…§á†«" tabindex="-1"><a class="header-anchor" href="#_3-1-copy-on-write-fork-á„€á…®á„’á…§á†«"><span>3.1. Copy-on-Write fork êµ¬í˜„</span></a></h3><p>copy-on-write(COW)ëŠ” parentì™€ childê°€ ê°™ì€ physical pageë¥¼ ê³µìœ í•˜ë‹¤ê°€ ì²˜ìŒìœ¼ë¡œ writeë¥¼ ì‹œë„í•˜ëŠ” ìˆœê°„ì—ë§Œ pageë¥¼ ë³µì‚¬í•˜ì—¬ ë¶„ë¦¬í•˜ëŠ” ë°©ì‹ì´ë‹¤. êµ¬í˜„ì€ ì„¸ ê°€ì§€ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.</p><ol><li>fork ì‹œ ê³µìœ  page ì„¤ì •</li><li>user mode write fault ì²˜ë¦¬</li><li>physical page reference count ê´€ë¦¬</li></ol><hr><h4 id="_3-1-1-uvmcopyá„‹á…¦á„‰á…¥-á„‘á…¦á„‹á…µá„Œá…µ-á„€á…©á†¼á„‹á…²-á„‰á…¥á†¯á„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_3-1-1-uvmcopyá„‹á…¦á„‰á…¥-á„‘á…¦á„‹á…µá„Œá…µ-á„€á…©á†¼á„‹á…²-á„‰á…¥á†¯á„Œá…¥á†¼"><span>3.1.1. uvmcopyì—ì„œ í˜ì´ì§€ ê³µìœ  ì„¤ì •</span></a></h4><p><code>uvmcopy</code>ëŠ” parentì˜ pagetableì„ ìˆœíšŒí•˜ë©´ì„œ writable pageë¥¼ read-onlyë¡œ ë°”ê¾¸ê³  <code>PTE_COW</code> flagë¥¼ ì¶”ê°€í•œë‹¤. ì´í›„ ë™ì¼í•œ physical pageë¥¼ child pagetableì— ë§¤í•‘í•˜ê³ , ref countë¥¼ ì¦ê°€ì‹œí‚¨ë‹¤.</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token comment">// kernel/vm.c</span></span>
<span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">*</span>pte <span class="token operator">&amp;</span> PTE_W<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token operator">*</span>pte <span class="token operator">&amp;=</span> <span class="token operator">~</span>PTE_W<span class="token punctuation">;</span>     <span class="token comment">// read-only</span></span>
<span class="line">  <span class="token operator">*</span>pte <span class="token operator">|=</span> PTE_COW<span class="token punctuation">;</span>    <span class="token comment">// cow í‘œì‹œ</span></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">mappages</span><span class="token punctuation">(</span>new<span class="token punctuation">,</span> i<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">,</span> pa<span class="token punctuation">,</span> <span class="token function">PTE_FLAGS</span><span class="token punctuation">(</span><span class="token operator">*</span>pte<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">*</span>pte <span class="token operator">|=</span> PTE_W<span class="token punctuation">;</span>    <span class="token comment">// ì‹¤íŒ¨ ì‹œ ë³µêµ¬</span></span>
<span class="line">    <span class="token operator">*</span>pte <span class="token operator">&amp;=</span> <span class="token operator">~</span>PTE_COW<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">goto</span> err<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">mappages</span><span class="token punctuation">(</span>new<span class="token punctuation">,</span> i<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">,</span> pa<span class="token punctuation">,</span> <span class="token function">PTE_FLAGS</span><span class="token punctuation">(</span><span class="token operator">*</span>pte<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">inc_ref</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>pa<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// ê³µìœ  page ref count++ í•˜ê²Œ ë¨..</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ ê³¼ì •ìœ¼ë¡œ parentì™€ childëŠ” ê°™ì€ physical pageë¥¼ read-onlyë¡œ ë°”ë¼ë³´ë©°, write ì‹œ faultê°€ ë°œìƒí•˜ë„ë¡ ì¤€ë¹„ëœë‹¤.</p><hr><h4 id="_3-1-2-usertrapá„‹á…¦á„‰á…¥-write-fault-á„á…¥á„…á…µ" tabindex="-1"><a class="header-anchor" href="#_3-1-2-usertrapá„‹á…¦á„‰á…¥-write-fault-á„á…¥á„…á…µ"><span>3.1.2. usertrapì—ì„œ write fault ì²˜ë¦¬</span></a></h4><p>user modeì—ì„œ write faultê°€ ë°œìƒí•˜ë©´ <code>usertrap</code>ì´ COW ì—¬ë¶€ë¥¼ íŒì •í•œë‹¤. í•´ë‹¹ pageê°€ <code>PTE_COW</code>ì´ê³  ê³µìœ  ref countê°€ 2 ì´ìƒì´ë©´ ìƒˆ pageë¥¼ í• ë‹¹í•´ ë‚´ìš©ì„ ë³µì‚¬í•œ ë’¤ child ìª½ìœ¼ë¡œë§Œ writable ë§¤í•‘ì„ ë§Œë“ ë‹¤. ref countê°€ 1ì´ë©´ ê°™ì€ pageë¥¼ ê·¸ëŒ€ë¡œ writableë¡œ ì „í™˜í•œë‹¤.</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token comment">// kernel/trap.c</span></span>
<span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">r_scause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                 <span class="token comment">// store fault</span></span>
<span class="line">  uint64 va <span class="token operator">=</span> <span class="token function">r_stval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token class-name">pte_t</span> <span class="token operator">*</span>pte <span class="token operator">=</span> <span class="token function">walk</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>pagetable<span class="token punctuation">,</span> va<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>pte <span class="token operator">&amp;</span> PTE_COW<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">*</span>pte <span class="token operator">&amp;</span> PTE_V<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">*</span>pte <span class="token operator">&amp;</span> PTE_U<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    uint64 pa <span class="token operator">=</span> <span class="token function">PTE2PA</span><span class="token punctuation">(</span><span class="token operator">*</span>pte<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">get_ref</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>pa<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">// ê³µìœ  page</span></span>
<span class="line">      <span class="token keyword">char</span> <span class="token operator">*</span>mem <span class="token operator">=</span> <span class="token function">kalloc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token function">memmove</span><span class="token punctuation">(</span>mem<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>pa<span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token function">uvmunmap</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>pagetable<span class="token punctuation">,</span> <span class="token function">PGROUNDDOWN</span><span class="token punctuation">(</span>va<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token function">mappages</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>pagetable<span class="token punctuation">,</span> <span class="token function">PGROUNDDOWN</span><span class="token punctuation">(</span>va<span class="token punctuation">)</span><span class="token punctuation">,</span> PGSIZE<span class="token punctuation">,</span></span>
<span class="line">               <span class="token punctuation">(</span>uint64<span class="token punctuation">)</span>mem<span class="token punctuation">,</span> PTE_R<span class="token operator">|</span>PTE_W<span class="token operator">|</span>PTE_X<span class="token operator">|</span>PTE_U<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                          <span class="token comment">// ë‹¨ë… page</span></span>
<span class="line">      <span class="token operator">*</span>pte <span class="token operator">|=</span> PTE_W<span class="token punctuation">;</span></span>
<span class="line">      <span class="token operator">*</span>pte <span class="token operator">&amp;=</span> <span class="token operator">~</span>PTE_COW<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">goto</span> trapret<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ logic ë•ë¶„ì— writeë¥¼ ì‹œë„í•œ processë§Œ ìƒˆ pageë¥¼ ê°–ê²Œ ë˜ê³ , ë‚˜ë¨¸ì§€ í”„ë¡œì„¸ìŠ¤ëŠ” ì›ë³¸ pageë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•œë‹¤.</p><hr><h4 id="_3-1-3-kalloc-kfreeá„‹á…¦á„‰á…¥-reference-count-á„€á…ªá†«á„…á…µ" tabindex="-1"><a class="header-anchor" href="#_3-1-3-kalloc-kfreeá„‹á…¦á„‰á…¥-reference-count-á„€á…ªá†«á„…á…µ"><span>3.1.3. kalloc / kfreeì—ì„œ reference count ê´€ë¦¬</span></a></h4><p>physical pageë³„ ì‚¬ìš© ê°œìˆ˜ë¥¼ <code>ref_counts[]</code> ë°°ì—´ë¡œ ê´€ë¦¬í•œë‹¤. ìƒˆ pageë¥¼ í• ë‹¹í•˜ë©´ ref countë¥¼ 1ë¡œ ì„¤ì •í•˜ê³ , pageë¥¼ ê³µìœ í•  ë•Œ <code>inc_ref</code>ë¡œ ì¦ê°€ì‹œí‚¨ë‹¤. <code>kfree</code>ëŠ” ref countê°€ 0ì´ ë  ë•Œë§Œ ì‹¤ì œ free listì— ë°˜í™˜í•œë‹¤.</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token comment">// kalloc.c</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">inc_ref</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>pa<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  ref_counts<span class="token punctuation">[</span><span class="token punctuation">(</span>uint64<span class="token punctuation">)</span>pa <span class="token operator">/</span> PGSIZE<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">kfree</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>pa<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  uint <span class="token operator">*</span>ref <span class="token operator">=</span> <span class="token operator">&amp;</span>ref_counts<span class="token punctuation">[</span><span class="token punctuation">(</span>uint64<span class="token punctuation">)</span>pa <span class="token operator">/</span> PGSIZE<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token operator">*</span>ref <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">*</span>ref <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">memset</span><span class="token punctuation">(</span>pa<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> PGSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">run</span><span class="token operator">*</span><span class="token punctuation">)</span>pa<span class="token punctuation">)</span><span class="token operator">-&gt;</span>next <span class="token operator">=</span> kmem<span class="token punctuation">.</span>freelist<span class="token punctuation">;</span></span>
<span class="line">    kmem<span class="token punctuation">.</span>freelist <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">run</span><span class="token operator">*</span><span class="token punctuation">)</span>pa<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ˆê¸°í™” ì‹œ ëª¨ë“  usable pageì˜ ref countë¥¼ 1ë¡œ ì„¤ì •í•œ ë’¤ <code>freerange</code>ì—ì„œ <code>kfree</code>ë¥¼ í˜¸ì¶œí•´ free listì— ë„£ëŠ”ë‹¤.</p><hr><h4 id="_3-1-4-á„‹á…§á†«á„ƒá…©á†¼-á„€á…§á†¯á„€á…ª" tabindex="-1"><a class="header-anchor" href="#_3-1-4-á„‹á…§á†«á„ƒá…©á†¼-á„€á…§á†¯á„€á…ª"><span>3.1.4. ì—°ë™ ê²°ê³¼</span></a></h4><ul><li><code>cowtest</code>ì˜ <code>simpletest</code>, <code>threetest</code>, <code>filetest</code>ê°€ ëª¨ë‘ <code>pass</code>ëœë‹¤.</li><li>parentì™€ childì˜ write ë™ì‘ì´ ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ ì•Šìœ¼ë©°, ì—¬ì „íˆ read-only pageë¥¼ ê³µìœ í•¨ìœ¼ë¡œì¨ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ í¬ê²Œ ê°ì†Œí•œë‹¤.</li><li>ref count ê´€ë¦¬ë¡œ page ëˆ„ìˆ˜ ì—†ì´ <code>exit</code> í›„ ë©”ëª¨ë¦¬ê°€ ì •ìƒì ìœ¼ë¡œ íšŒìˆ˜ëœë‹¤.</li></ul><p>copy-on-write fork êµ¬í˜„ì€ ìœ„ ì„¸ ë¶€ë¶„ì´ ë§ë¬¼ë ¤ ë™ì‘í•˜ë©°, xv6ì˜ ê¸°ë³¸ fork ëŒ€ë¹„ ì„±ëŠ¥ê³¼ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„ í¬ê²Œ í–¥ìƒì‹œí‚¨ë‹¤.</p><h3 id="_3-2-large-file-á„Œá…µá„‹á…¯á†«-á„€á…®á„’á…§á†«" tabindex="-1"><a class="header-anchor" href="#_3-2-large-file-á„Œá…µá„‹á…¯á†«-á„€á…®á„’á…§á†«"><span>3.2. Large file ì§€ì› êµ¬í˜„</span></a></h3><p>large fileì„ ì €ì¥í•˜ê¸° ìœ„í•´ inodeì˜ block address êµ¬ì¡°ë¥¼ direct + single indirect + double indirect 3ë‹¨ê³„ë¡œ í™•ì¥í–ˆë‹¤. bigfile í…ŒìŠ¤íŠ¸ê°€ ìš”êµ¬í•˜ëŠ” <code>65803</code>ê°œ blockì„ ì •í™•íˆ ì§€ì›í•˜ë„ë¡ ìƒìˆ˜ë¥¼ ì¬ì¡°ì •í•˜ê³ , <code>bmap</code>ì™€ <code>itrunc</code>ë¥¼ ìˆ˜ì •í•´ block í• ë‹¹Â·í•´ì œë¥¼ ì²˜ë¦¬í•œë‹¤.</p><hr><h4 id="_3-2-1-á„’á…¢á†¨á„‰á…µá†·-á„†á…¢á„á…³á„…á…©-á„‡á…§á†«á„€á…§á†¼" tabindex="-1"><a class="header-anchor" href="#_3-2-1-á„’á…¢á†¨á„‰á…µá†·-á„†á…¢á„á…³á„…á…©-á„‡á…§á†«á„€á…§á†¼"><span>3.2.1. í•µì‹¬ ë§¤í¬ë¡œ ë³€ê²½</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token comment">// kernel/param.h</span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FSSIZE</span> <span class="token expression"><span class="token number">262656</span>      </span><span class="token comment">// file system ì „ì²´ block ìˆ˜</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// kernel/fs.h</span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NDIRECT</span> <span class="token expression"><span class="token number">11</span>         </span><span class="token comment">// direct pointer 11ê°œ</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NINDIRECT</span> <span class="token expression"><span class="token punctuation">(</span>BSIZE <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>uint<span class="token punctuation">)</span><span class="token punctuation">)</span>     </span><span class="token comment">// 256</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAXFILE</span> <span class="token expression"><span class="token punctuation">(</span>NDIRECT <span class="token operator">+</span> NINDIRECT <span class="token operator">+</span> NINDIRECT<span class="token operator">*</span>NINDIRECT<span class="token punctuation">)</span>   </span><span class="token comment">// 11 + 256 + 65536</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>direct pointerë¥¼ 11ê°œë¡œ ì¤„ì—¬ <code>addrs[NDIRECT+2]</code> ë°°ì—´ì˜ ë§ˆì§€ë§‰ ë‘ ì¹¸ì„ single indirect, double indirect pointerë¡œ ì‚¬ìš©í•œë‹¤.</li><li><code>MAXFILE</code>ì„ double indirect ë²”ìœ„ê¹Œì§€ ê³„ì‚°í•´ bigfile í…ŒìŠ¤íŠ¸ì˜ block ìˆ˜ì™€ ì¼ì¹˜ì‹œí‚¨ë‹¤.</li></ul><hr><h4 id="_3-2-2-dinode-á„€á…®á„Œá…©" tabindex="-1"><a class="header-anchor" href="#_3-2-2-dinode-á„€á…®á„Œá…©"><span>3.2.2. dinode êµ¬ì¡°</span></a></h4><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">struct</span> <span class="token class-name">dinode</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">short</span> type<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">short</span> major<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">short</span> minor<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">short</span> nlink<span class="token punctuation">;</span></span>
<span class="line">  uint  size<span class="token punctuation">;</span></span>
<span class="line">  uint  addrs<span class="token punctuation">[</span>NDIRECT<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// [0..10] direct, [11] single, [12] double</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_3-2-3-bmap-á„‰á…®á„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_3-2-3-bmap-á„‰á…®á„Œá…¥á†¼"><span>3.2.3. <code>bmap</code> ìˆ˜ì •</span></a></h4><p>double indirect ë¶„ê¸°ë¥¼ ì¶”ê°€í•´ ë‘ ë‹¨ê³„ë¡œ blockì„ í• ë‹¹Â·íƒìƒ‰í•œë‹¤.</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token comment">// kernel/fs.c (ë°œì·Œ)</span></span>
<span class="line">bn <span class="token operator">-=</span> NINDIRECT<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// double indirect</span></span>
<span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span>bn <span class="token operator">&lt;</span> NINDIRECT <span class="token operator">*</span> NINDIRECT<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1ë‹¨ê³„: double indirect pointerê°€ ì—†ìœ¼ë©´ í• ë‹¹</span></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>addr <span class="token operator">=</span> ip<span class="token operator">-&gt;</span>addrs<span class="token punctuation">[</span>NDIRECT<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    addr <span class="token operator">=</span> <span class="token function">balloc</span><span class="token punctuation">(</span>ip<span class="token operator">-&gt;</span>dev<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    ip<span class="token operator">-&gt;</span>addrs<span class="token punctuation">[</span>NDIRECT<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> addr<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// 2ë‹¨ê³„: first level index ê³„ì‚°</span></span>
<span class="line">  bp <span class="token operator">=</span> <span class="token function">bread</span><span class="token punctuation">(</span>ip<span class="token operator">-&gt;</span>dev<span class="token punctuation">,</span> addr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  a  <span class="token operator">=</span> <span class="token punctuation">(</span>uint<span class="token operator">*</span><span class="token punctuation">)</span>bp<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>addr <span class="token operator">=</span> a<span class="token punctuation">[</span>bn <span class="token operator">/</span> NINDIRECT<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    addr <span class="token operator">=</span> <span class="token function">balloc</span><span class="token punctuation">(</span>ip<span class="token operator">-&gt;</span>dev<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    a<span class="token punctuation">[</span>bn <span class="token operator">/</span> NINDIRECT<span class="token punctuation">]</span> <span class="token operator">=</span> addr<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">log_write</span><span class="token punctuation">(</span>bp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">brelse</span><span class="token punctuation">(</span>bp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// 3ë‹¨ê³„: second level index</span></span>
<span class="line">  bp <span class="token operator">=</span> <span class="token function">bread</span><span class="token punctuation">(</span>ip<span class="token operator">-&gt;</span>dev<span class="token punctuation">,</span> addr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  a  <span class="token operator">=</span> <span class="token punctuation">(</span>uint<span class="token operator">*</span><span class="token punctuation">)</span>bp<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>addr <span class="token operator">=</span> a<span class="token punctuation">[</span>bn <span class="token operator">%</span> NINDIRECT<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    addr <span class="token operator">=</span> <span class="token function">balloc</span><span class="token punctuation">(</span>ip<span class="token operator">-&gt;</span>dev<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    a<span class="token punctuation">[</span>bn <span class="token operator">%</span> NINDIRECT<span class="token punctuation">]</span> <span class="token operator">=</span> addr<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">log_write</span><span class="token punctuation">(</span>bp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">brelse</span><span class="token punctuation">(</span>bp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> addr<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ë™ì‘ ìˆœì„œ</p><ul><li>double indirect pointerê°€ ì—†ìœ¼ë©´ ìƒˆ blockì„ í• ë‹¹í•œë‹¤.</li><li>ì²« ë²ˆì§¸ ë ˆë²¨ ë°°ì—´ì„ ê°€ì ¸ì™€ indexë¥¼ ê³„ì‚°í•˜ê³ , ë‘ ë²ˆì§¸ ë ˆë²¨ ë°°ì—´ blockì„ í• ë‹¹â€§ê¸°ë¡í•œë‹¤.</li><li>ë‘ ë²ˆì§¸ ë ˆë²¨ ë°°ì—´ì—ì„œ ì‹¤ì œ data blockì„ í• ë‹¹í•´ ë°˜í™˜í•œë‹¤.</li></ul><hr><h4 id="_3-2-4-itrunc-á„€á…¢á„‚á…§á†·-á„‹á…­á„‹á…£á†¨" tabindex="-1"><a class="header-anchor" href="#_3-2-4-itrunc-á„€á…¢á„‚á…§á†·-á„‹á…­á„‹á…£á†¨"><span>3.2.4. <code>itrunc</code> ê°œë… ìš”ì•½</span></a></h4><p><code>itrunc</code>ëŠ” direct, single indirect, double indirect ë¸”ë¡ì„ ëª¨ë‘ ìˆœíšŒí•˜ë©° <code>bfree</code>ë¥¼ í˜¸ì¶œí•´ í•´ì œí•œë‹¤.<br> double indirectëŠ” ë‘ ë‹¨ê³„ì— ê±¸ì³ <code>bread â†’ loop â†’ bfree</code> ìˆœìœ¼ë¡œ ì¬ê·€ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.</p><hr><h4 id="_3-2-5-bigfile-á„á…¦á„‰á…³á„á…³á„‹á…ªá„‹á…´-á„Œá…¥á†¼á„’á…¡á†¸á„‰á…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_3-2-5-bigfile-á„á…¦á„‰á…³á„á…³á„‹á…ªá„‹á…´-á„Œá…¥á†¼á„’á…¡á†¸á„‰á…¥á†¼"><span>3.2.5. <code>bigfile</code> í…ŒìŠ¤íŠ¸ì™€ì˜ ì •í•©ì„±</span></a></h4><ul><li><code>bigfile.c</code>ëŠ” <code>MAXFILE</code>ì— í•´ë‹¹í•˜ëŠ” <code>65803</code> blockì„ ìˆœì°¨ writeí•œ ë’¤ readë¡œ ê²€ì¦í•œë‹¤.</li><li>double indirect ë¶„ê¸°ì™€ ìƒìˆ˜ ì¡°ì •ìœ¼ë¡œ write loopê°€ block í• ë‹¹ ì˜¤ë¥˜ ì—†ì´ ì™„ë£Œëœë‹¤.</li><li>read ë‹¨ê³„ì—ì„œ block ë²ˆí˜¸ì™€ dataê°€ ì¼ì¹˜í•´ ë°ì´í„° ë¬´ê²°ì„±ì´ ë³´ì¥ëœë‹¤.</li></ul><p>ì´ë¡œì¨ xv6 file systemì€ ì•½ 66 MB(65803 * 1024) ê·œëª¨ì˜ íŒŒì¼ê¹Œì§€ ì•ˆì •ì ìœ¼ë¡œ ì €ì¥Â·ì½ê¸°í•  ìˆ˜ ìˆë‹¤.</p><h3 id="_3-3-symbolic-link-á„€á…®á„’á…§á†«" tabindex="-1"><a class="header-anchor" href="#_3-3-symbolic-link-á„€á…®á„’á…§á†«"><span>3.3. Symbolic link êµ¬í˜„</span></a></h3><p>symbolic linkì€ íŒŒì¼ ì´ë¦„ ëŒ€ì‹  ê²½ë¡œ ë¬¸ìì—´ì„ ì €ì¥í•´ ë‹¤ë¥¸ íŒŒì¼ì„ ê°„ì ‘ ì°¸ì¡°í•˜ëŠ” inodeì´ë‹¤.<br> êµ¬í˜„ì€ inode type ì¶”ê°€, <code>sys_symlink</code> ì‹œìŠ¤í…œì½œ ì •ì˜, <code>sys_open</code>ì˜ ê²½ë¡œ í•´ì„ í™•ì¥, ê·¸ë¦¬ê³  ë£¨í”„ ë°©ì§€ë¥¼ ìœ„í•œ ê¹Šì´ ì œí•œìœ¼ë¡œ êµ¬ì„±ëœë‹¤.</p><hr><h4 id="_3-3-1-á„Œá…®á„‹á…­-á„‰á…¡á†¼á„‰á…®-á„†á…µá†¾-á„á…¡á„‹á…µá†¸" tabindex="-1"><a class="header-anchor" href="#_3-3-1-á„Œá…®á„‹á…­-á„‰á…¡á†¼á„‰á…®-á„†á…µá†¾-á„á…¡á„‹á…µá†¸"><span>3.3.1. ì£¼ìš” ìƒìˆ˜ ë° íƒ€ì…</span></a></h4><ul><li><code>T_SYMLINK</code> íŒŒì¼ íƒ€ì…ì„ inodeì™€ stat êµ¬ì¡°ì— ì¶”ê°€</li><li><code>MAX_SYMLINK_LOOPS</code> ìƒìˆ˜ë¥¼ <code>10</code>ìœ¼ë¡œ ì •ì˜í•´ ë¬´í•œ ìˆœí™˜ì„ ë°©ì§€</li><li><code>stat</code>, <code>user.h</code>, ì‹œìŠ¤í…œì½œ ë²ˆí˜¸ í…Œì´ë¸”ì— íƒ€ì…â€§í•¨ìˆ˜â€§ë²ˆí˜¸ë¥¼ ëª¨ë‘ ë°˜ì˜</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">T_SYMLINK</span> <span class="token expression"><span class="token number">4</span>        </span><span class="token comment">// kernel/fs.h, kernel/stat.h</span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAX_SYMLINK_LOOPS</span> <span class="token expression"><span class="token number">10</span></span></span></span>
<span class="line"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SYS_symlink</span> <span class="token expression"><span class="token number">22</span>     </span><span class="token comment">// syscall ë²ˆí˜¸</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_3-3-2-sys-symlink" tabindex="-1"><a class="header-anchor" href="#_3-3-2-sys-symlink"><span>3.3.2. sys_symlink</span></a></h4><p><code>sys_symlink(const char *target, const char *linkpath)</code>ëŠ” ë‹¤ìŒ ìˆœì„œë¡œ ë™ì‘í•œë‹¤.</p><ol><li><code>create(linkpath, T_SYMLINK, 0, 0)</code> í˜¸ì¶œë¡œ ë¹ˆ symlink inode ìƒì„±</li><li><code>writei</code>ë¡œ target ê²½ë¡œ ë¬¸ìì—´ì„ inode ë°ì´í„° ì˜ì—­ì— ê¸°ë¡</li><li>ì‘ì—… ì‹¤íŒ¨ ì‹œ <code>iunlockput</code> í›„ <code>-1</code> ë°˜í™˜</li></ol><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ip <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> T_SYMLINK<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">writei</span><span class="token punctuation">(</span>ip<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>uint64<span class="token punctuation">)</span>target<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">strlen</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">strlen</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_3-3-3-ys-opená„‹á…´-á„€á…§á†¼á„…á…©-á„’á…¢á„‰á…¥á†¨" tabindex="-1"><a class="header-anchor" href="#_3-3-3-ys-opená„‹á…´-á„€á…§á†¼á„…á…©-á„’á…¢á„‰á…¥á†¨"><span>3.3.3. <code>ys_open</code>ì˜ ê²½ë¡œ í•´ì„</span></a></h4><p>open ì‹œ <code>symlink</code>ë¥¼ ìë™ìœ¼ë¡œ ë”°ë¼ê°€ë„ë¡ <code>while</code> ë£¨í”„ë¥¼ ì¶”ê°€í–ˆë‹¤.</p><ul><li>ìµœëŒ€ <code>MAX_SYMLINK_DEPTH</code>ë§Œí¼ ë°˜ë³µí•˜ë©° <code>namei</code>ë¡œ í˜„ì¬ ê²½ë¡œë¥¼ lookup</li><li>inodeê°€ <code>T_SYMLINK</code>, <code>O_NOFOLLOW</code>ê°€ ì—†ëŠ” ê²½ìš° <ul><li>symlink íŒŒì¼ì—ì„œ target ê²½ë¡œ ë¬¸ìì—´ì„ ì½ì–´ <code>path</code> ë³€ìˆ˜ì— ë³µì‚¬</li><li>ê¹Šì´ ì¹´ìš´íŠ¸ë¥¼ ì¦ê°€ì‹œí‚¤ê³  ë£¨í”„ ì¬ì‹œì‘</li></ul></li><li>depth ì´ˆê³¼ ì‹œ <em>ì‹¤íŒ¨</em></li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> depth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> depth <span class="token operator">&lt;</span> MAX_SYMLINK_DEPTH<span class="token punctuation">;</span> depth<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ip <span class="token operator">=</span> <span class="token function">namei</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span><span class="token punctuation">(</span>omode <span class="token operator">&amp;</span> O_CREATE<span class="token punctuation">)</span></span>
<span class="line">      ip <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> T_FILE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">else</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span></span>
<span class="line">    <span class="token function">ilock</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span>ip<span class="token operator">-&gt;</span>type <span class="token operator">==</span> T_SYMLINK <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>omode <span class="token operator">&amp;</span> O_NOFOLLOW<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">char</span> link_target<span class="token punctuation">[</span>MAXPATH<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token function">readi</span><span class="token punctuation">(</span>ip<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>uint64<span class="token punctuation">)</span>link_target<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> MAXPATH <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">iunlockput</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    link_target<span class="token punctuation">[</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">&#39;\0&#39;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">safestrcpy</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> link_target<span class="token punctuation">,</span> MAXPATH<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">continue</span><span class="token punctuation">;</span>          <span class="token comment">// ë‹¤ì‹œ í•´ì„</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">goto</span> found<span class="token punctuation">;</span>          <span class="token comment">// ì‹¤ì œ íŒŒì¼ ë„ì°©</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_3-3-4-create-á„’á…¡á†·á„‰á…®-á„’á…©á„’á…ªá†«á„‰á…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_3-3-4-create-á„’á…¡á†·á„‰á…®-á„’á…©á„’á…ªá†«á„‰á…¥á†¼"><span>3.3.4. create í•¨ìˆ˜ í˜¸í™˜ì„±</span></a></h4><p><code>create</code>ëŠ” ê¸°ì¡´ T_FILEâ€†Â·â€†T_DIRÂ·T_DEVICE ë¡œì§ì„ ìœ ì§€í•˜ë©°, <code>T_SYMLINK</code>ë¥¼ ì¶”ê°€ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•˜ë‹¤. symlink ìƒì„± ì‹œ ë³„ë„ ì´ˆê¸°í™”ëŠ” í•„ìš” ì—†ê³ , <code>nlink</code>ëŠ” 1ë¡œ ì„¤ì •í•œ ë’¤ <code>dirlink</code>ë¡œ ë””ë ‰í† ë¦¬ì— ë“±ë¡í•œë‹¤.</p><hr><h4 id="_3-3-5-á„Œá…¥á†«á„á…¦á„Œá…¥á†¨á„‹á…µá†«-á„ƒá…©á†¼á„Œá…¡á†¨-á„€á…ªá„Œá…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_3-3-5-á„Œá…¥á†«á„á…¦á„Œá…¥á†¨á„‹á…µá†«-á„ƒá…©á†¼á„Œá…¡á†¨-á„€á…ªá„Œá…¥á†¼"><span>3.3.5. ì „ì²´ì ì¸ ë™ì‘ ê³¼ì •</span></a></h4><ul><li><code>symlink target link</code> ëª…ë ¹ì´ ë“¤ì–´ì˜¤ë©´ <code>sys_symlink</code>ê°€ link íŒŒì¼ì„ ë§Œë“¤ê³  target ê²½ë¡œë¥¼ ë‚´ìš©ìœ¼ë¡œ ê¸°ë¡í•œë‹¤.</li><li>ì´í›„ <code>open(link)</code> í˜¸ì¶œì€ ë£¨í”„ë¥¼ ëŒë©° symlink íŒŒì¼ì„ ì—´ê³  target ë¬¸ìì—´ì„ ì½ì–´ ë‹¤ì‹œ <code>namei</code>ë¥¼ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.</li><li>ìµœëŒ€ 10ë‹¨ê³„ê¹Œì§€ link chainì„ ë”°ë¼ê°€ë©°, cycleì´ê±°ë‚˜ ê¹Šì´ ì´ˆê³¼ ì‹œ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•œë‹¤.</li><li><code>O_NOFOLLOW</code> flagë¥¼ ì‚¬ìš©í•˜ë©´ <code>symlink</code> ìì²´ë¥¼ ì—´ ìˆ˜ ìˆë‹¤.</li></ul><p>ì´ ë°©ì‹ìœ¼ë¡œ <code>symlinktest</code>ì˜ link ìƒì„±, loop ê°ì§€, broken link ì²˜ë¦¬, ë™ì‹œì„±(createâ€†Â·â€†unlink race) ì‹œë‚˜ë¦¬ì˜¤ê°€ ëª¨ë‘ í†µê³¼ëœë‹¤.</p><h2 id="_4-results" tabindex="-1"><a class="header-anchor" href="#_4-results"><span>4. Results</span></a></h2><h3 id="_4-1-cowtest-c" tabindex="-1"><a class="header-anchor" href="#_4-1-cowtest-c"><span>4.1. <code>cowtest.c</code></span></a></h3><h4 id="_4-1-1-sub-test-comparison" tabindex="-1"><a class="header-anchor" href="#_4-1-1-sub-test-comparison"><span>4.1.1. Sub-test comparison</span></a></h4><table><thead><tr><th>Sub-test</th><th>Expected reference</th><th>Actual output</th><th>Analysis &amp; reasoning</th><th>Verdict</th></tr></thead><tbody><tr><td><code>simpletest</code></td><td><code>simple: ok</code></td><td>identical</td><td>COW pageëŠ” ë³µì‚¬ ì—†ì´ ê³µìœ , ref count +1/-1 ì •ìƒ</td><td><code>pass</code></td></tr><tr><td><code>threetest</code> (Ã—3)</td><td>ì„¸ ì¤„ ëª¨ë‘ <code>three: ok</code></td><td>identical</td><td>ì„¸ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— write â†’ ê³µìœ  page ë³µì‚¬ í›„ free, ref count leak ì—†ìŒ</td><td><code>pass</code></td></tr><tr><td><code>filetest</code></td><td><code>file: ok</code> ë° ë§ˆì§€ë§‰ <code>ALL COW TESTS PASSED</code></td><td>identical</td><td><code>copyout</code>ê°€ COW pageë¥¼ ì§ì ‘ ì²˜ë¦¬í•˜ë„ë¡ ìˆ˜ì •í•˜ì—¬ pipe alloc ì„±ê³µ</td><td><code>pass</code></td></tr></tbody></table><p>â†’ ë©”ëª¨ë¦¬ ê³µìœ Â·ë³µì‚¬Â·í•´ì œ ì „ ê³¼ì •ì´ ëª¨ë‘ <strong>ì˜¬ë°”ë¥´ê²Œ ì‘ë™</strong>í•œë‹¤.</p><hr><h3 id="_4-2-bigfile-c" tabindex="-1"><a class="header-anchor" href="#_4-2-bigfile-c"><span>4.2. <code>bigfile.c</code></span></a></h3><table><thead><tr><th>í•­ëª©</th><th>Expected</th><th>Actual</th><th>ë¶„ì„</th></tr></thead><tbody><tr><td>Blocks written</td><td>65 803</td><td>65 803</td><td>double-indirect <code>bmap</code>ê°€ ì „ì²´ í• ë‹¹ ë²”ìœ„ ì²˜ë¦¬</td></tr><tr><td>Verification read</td><td>all match</td><td>all match</td><td>block ë²ˆí˜¸ì™€ ë°ì´í„° ì¼ì¹˜, ë¬´ê²°ì„± ê²€ì¦ í†µê³¼</td></tr><tr><td>Runtime (QEMU)</td><td>ìˆ˜ ë¶„</td><td>ì•½ 20 ë¶„</td><td>ë™ê¸°ì‹ log I/O ì§€ì—° í—ˆìš© ë²”ìœ„</td></tr></tbody></table><p>â†’ <code>66 MB</code>ê¸‰ fileì„ ì˜¤ë¥˜ ì—†ì´ write-read í–ˆìœ¼ë¯€ë¡œ large-file í™•ì¥ì´ ì„±ê³µì ìœ¼ë¡œ ë™ì‘í•œë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.</p><hr><h3 id="_4-3-symlinktest-c" tabindex="-1"><a class="header-anchor" href="#_4-3-symlinktest-c"><span>4.3. <code>symlinktest.c</code></span></a></h3><table><thead><tr><th>Sub-test</th><th>Observation</th><th>Explanation</th><th>Verdict</th></tr></thead><tbody><tr><td>Basic link (<code>b</code>â†’<code>a</code>)</td><td><code>b</code> íƒ€ì… <code>T_SYMLINK</code>, ì½ìœ¼ë©´ <code>&#39;a&#39;</code></td><td><code>create</code>ê°€ <code>T_SYMLINK</code> ì „ë‹¬, target ê²½ë¡œ ì €ì¥</td><td>pass</td></tr><tr><td>Broken link</td><td>ì›ë³¸ <code>a</code> ì‚­ì œ í›„ <code>open(b)</code> ì‹¤íŒ¨</td><td><code>sys_open</code>ì´ depth loop ë‚´ì—ì„œ inode ë¯¸ì¡´ì¬ ì‹œ ì—ëŸ¬ ë°˜í™˜</td><td>pass</td></tr><tr><td>Cyclic link (aâ†”b)</td><td><code>open(b)</code> ì˜¤ë¥˜ ë°˜í™˜</td><td>depth ì¹´ìš´í„° 10 ë„ë‹¬ í›„ ë£¨í”„ ê°ì§€</td><td>pass</td></tr><tr><td>Chain (1â†’2â†’3â†’4)</td><td><code>write</code> via <code>1</code>, <code>read</code> via <code>4</code> ë™ì¼ ë¬¸ì</td><td>4-step í•´ì„ì´ <code>MAX_SYMLINK_LOOPS</code>-ì•ˆì— ì™„ë£Œ</td><td>pass</td></tr><tr><td>Concurrency</td><td>ë‘ child ëª¨ë‘ ì •ìƒ ì¢…ë£Œ</td><td>inode lock + log write ë¡œ race condition ë°©ì§€</td><td>pass</td></tr></tbody></table><p>â†’ ë§í¬ ìƒì„±Â·ì‚­ì œÂ·í•´ì„Â·ë™ì‹œì„±ì´ ëª¨ë‘ ìš”êµ¬ ì¡°ê±´ì„ ì¶©ì¡±í•œë‹¤.</p><hr><h3 id="_4-4-completion-process" tabindex="-1"><a class="header-anchor" href="#_4-4-completion-process"><span>4.4. Completion process</span></a></h3><ol><li><code>make qemu</code></li><li>QEMU shell:</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">xv6 kernel is booting</span>
<span class="line"></span>
<span class="line">init: starting <span class="token function">sh</span></span>
<span class="line">$ cowtest</span>
<span class="line">simple: ok</span>
<span class="line">simple: ok</span>
<span class="line">three: ok</span>
<span class="line">three: ok</span>
<span class="line">three: ok</span>
<span class="line">file: ok</span>
<span class="line">ALL COW TESTS PASSED</span>
<span class="line">$ bigfile</span>
<span class="line"><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span></span>
<span class="line">wrote <span class="token number">65803</span> blocks</span>
<span class="line">bigfile <span class="token keyword">done</span><span class="token punctuation">;</span> ok</span>
<span class="line">$ symlinktest</span>
<span class="line">Start: <span class="token builtin class-name">test</span> symlinks</span>
<span class="line"><span class="token builtin class-name">test</span> symlinks: ok</span>
<span class="line">Start: <span class="token builtin class-name">test</span> concurrent symlinks</span>
<span class="line"><span class="token builtin class-name">test</span> concurrent symlinks: ok</span>
<span class="line">$ </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>ì„¸ test ëª¨ë‘ <code>â€¦ ok</code> / <code>PASSED</code> ì¶œë ¥ë˜ì—ˆìŒ.</li></ol><p><img src="https://kmbzn.com/images/screenshot.png" alt="screenshot"></p><hr><h3 id="_4-5-program-flow-snapshot-á„€á…µá„‚á…³á†¼á„‡á…§á†¯-á„ƒá…©á†¼á„Œá…¡á†¨-á„’á…³á„…á…³á†·-á„‹á…­á„‹á…£á†¨" tabindex="-1"><a class="header-anchor" href="#_4-5-program-flow-snapshot-á„€á…µá„‚á…³á†¼á„‡á…§á†¯-á„ƒá…©á†¼á„Œá…¡á†¨-á„’á…³á„…á…³á†·-á„‹á…­á„‹á…£á†¨"><span>4.5. Program-flow snapshot ê¸°ëŠ¥ë³„ ë™ì‘ íë¦„ ìš”ì•½</span></a></h3><ul><li><strong>COW</strong> : <code>fork â†’ uvmcopy(PTE_COW) â†’ write fault â†’ usertrap â†’ kalloc+copy â†’ resume</code></li><li><strong>Large file</strong> : <code>write loop â†’ bmap(directâ†’singleâ†’double) â†’ log_write â†’ disk</code></li><li><strong>Symlink</strong> : <code>sys_open â†’ namei â†’ ilock â†’ type check â†’ readi(target) â†’ namei retry (â‰¤10)</code></li></ul><h2 id="_5-troubleshooting" tabindex="-1"><a class="header-anchor" href="#_5-troubleshooting"><span>5. Troubleshooting</span></a></h2><h3 id="_5-1-copy-on-write-troubleshooting" tabindex="-1"><a class="header-anchor" href="#_5-1-copy-on-write-troubleshooting"><span>5.1. Copy-on-Write troubleshooting</span></a></h3><h4 id="_5-1-1-initial-symptom" tabindex="-1"><a class="header-anchor" href="#_5-1-1-initial-symptom"><span>5.1.1. Initial symptom</span></a></h4><p><code>simpletest</code>, <code>threetest</code>ëŠ” í†µê³¼í–ˆìœ¼ë‚˜ <code>filetest</code>ì—ì„œ <strong><code>file: pipe() failed</code></strong> ë©”ì‹œì§€ ë°œìƒ.</p><h4 id="_5-1-2-hypotheses" tabindex="-1"><a class="header-anchor" href="#_5-1-2-hypotheses"><span>5.1.2. Hypotheses</span></a></h4><ul><li><strong>Memory leak</strong> : <code>pipealloc</code> ë‚´ë¶€ <code>kalloc</code> ì‹¤íŒ¨ ê°€ëŠ¥ì„± â†’ ë””ë²„ê·¸ ë¡œê·¸ ì¶”ê°€, ë¯¸ì¶œë ¥.</li><li><strong>File structure exhaustion</strong> : <code>filealloc</code> ì‹¤íŒ¨ ê°€ëŠ¥ì„± â†’ ë””ë²„ê·¸ ë¡œê·¸ ì¶”ê°€, ë¯¸ì¶œë ¥.</li></ul><h4 id="_5-1-3-root-cause" tabindex="-1"><a class="header-anchor" href="#_5-1-3-root-cause"><span>5.1.3. Root cause</span></a></h4><ul><li><code>pipe</code>ëŠ” fd ë²ˆí˜¸ë¥¼ user ë°°ì—´ì— ë³µì‚¬í•˜ê¸° ìœ„í•´ <code>copyout</code> í˜¸ì¶œ.</li><li>parent pageëŠ” <code>PTE_COW</code> + read-only.</li><li>ê¸°ì¡´ <code>copyout</code>ì€ <code>PTE_W</code>ê°€ êº¼ì§„ í˜ì´ì§€ë¥¼ ë§Œë‚˜ë©´ ì¦‰ì‹œ <code>-1</code> ë°˜í™˜ â†’ <code>pipealloc</code> ì‹¤íŒ¨.</li></ul><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token comment">// old copyout (excerpt)</span></span>
<span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>pte <span class="token operator">&amp;</span> PTE_W<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>          <span class="token comment">// write-protect â†’ ì¦‰ì‹œ ì‹¤íŒ¨</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-1-4-fix" tabindex="-1"><a class="header-anchor" href="#_5-1-4-fix"><span>5.1.4. Fix</span></a></h4><p><code>copyout</code>ì´ <code>PTE_COW</code> í”Œë˜ê·¸ë¥¼ ê°ì§€í•˜ë©´ ì§ì ‘ COW page ë³µì‚¬ í›„ ì¬ì‹œë„.</p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c"><pre><code class="language-c"><span class="line"><span class="token comment">// kernel/vm.c (core patch)</span></span>
<span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>pte <span class="token operator">&amp;</span> PTE_COW<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span>pte <span class="token operator">&amp;</span> PTE_W<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">copy_cow_page</span><span class="token punctuation">(</span>pagetable<span class="token punctuation">,</span> va<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-1-5-result" tabindex="-1"><a class="header-anchor" href="#_5-1-5-result"><span>5.1.5. Result</span></a></h4><p><code>pipe</code> ì„±ê³µ â†’ <code>filetest</code> <strong>ok</strong> â†’ ìµœì¢… <strong>ALL COW TESTS PASSED</strong>.</p><hr><h3 id="_5-2-large-file-troubleshooting" tabindex="-1"><a class="header-anchor" href="#_5-2-large-file-troubleshooting"><span>5.2. Large-file troubleshooting</span></a></h3><h4 id="_5-2-1-symptom-1" tabindex="-1"><a class="header-anchor" href="#_5-2-1-symptom-1"><span>5.2.1. Symptom 1</span></a></h4><p><code>wrote 268 blocks</code> í›„ <strong>file is too small</strong> ì˜¤ë¥˜.</p><h4 id="_5-2-2-cause-1" tabindex="-1"><a class="header-anchor" href="#_5-2-2-cause-1"><span>5.2.2. Cause 1</span></a></h4><p><code>NDIRECT</code>ê°€ 12ë¡œ ë‚¨ì•„ double-indirect í¬ì¸í„° ë¯¸ì‚¬ìš©.</p><h4 id="_5-2-3-fix-1" tabindex="-1"><a class="header-anchor" href="#_5-2-3-fix-1"><span>5.2.3. Fix 1</span></a></h4><p><code>NDIRECT</code> â†’ 11, <code>addrs[NDIRECT+2]</code>ë¡œ êµ¬ì¡°ì²´ ê°±ì‹  â†’ double-indirect í™œì„±í™”.</p><hr><h4 id="_5-2-4-symptom-2" tabindex="-1"><a class="header-anchor" href="#_5-2-4-symptom-2"><span>5.2.4. Symptom 2</span></a></h4><p><code>mkfs</code> assertion <strong>(BSIZE % sizeof(struct dinode)) == 0</strong> ì‹¤íŒ¨.</p><h4 id="_5-2-5-cause-2" tabindex="-1"><a class="header-anchor" href="#_5-2-5-cause-2"><span>5.2.5. Cause 2</span></a></h4><p><code>struct dinode</code> í¬ê¸°ê°€ 64 B ë°°ìˆ˜ ì•„ë‹˜.</p><h4 id="_5-2-6-fix-2" tabindex="-1"><a class="header-anchor" href="#_5-2-6-fix-2"><span>5.2.6. Fix 2</span></a></h4><p>ë°°ì—´ í¬ê¸° ì¡°ì •ìœ¼ë¡œ 64 B ì •ë ¬ í™•ë³´ â†’ ì´ë¯¸ì§€ ìƒì„± ì„±ê³µ.</p><hr><h4 id="_5-2-7-symptom-3" tabindex="-1"><a class="header-anchor" href="#_5-2-7-symptom-3"><span>5.2.7. Symptom 3</span></a></h4><p><code>bigfile</code> ì‹¤í–‰ ì‹œê°„ì´ ê³¼ë„(QEMU + sync log).</p><h4 id="_5-2-8-work-around" tabindex="-1"><a class="header-anchor" href="#_5-2-8-work-around"><span>5.2.8. Work-around</span></a></h4><p>ëŒ€ê¸° í›„ <strong>wrote 65803 blocks / bigfile done; ok</strong> ì¶œë ¥.</p><hr><h3 id="_5-3-symlink-troubleshooting" tabindex="-1"><a class="header-anchor" href="#_5-3-symlink-troubleshooting"><span>5.3. Symlink troubleshooting</span></a></h3><h4 id="_5-3-1-initial-compile-errors" tabindex="-1"><a class="header-anchor" href="#_5-3-1-initial-compile-errors"><span>5.3.1. Initial compile errors</span></a></h4><p>ë¯¸ì •ì˜ ìƒìˆ˜Â·ì¤‘ë³µ <code>stat</code>Â·ë¯¸ë“±ë¡ syscall ë“±.</p><h4 id="_5-3-2-fix-steps" tabindex="-1"><a class="header-anchor" href="#_5-3-2-fix-steps"><span>5.3.2. Fix steps</span></a></h4><p>ìƒìˆ˜ ì •ì˜, í•¨ìˆ˜ ì›í˜• ì¶”ê°€, <code>syscall.h / syscall.c / usys.pl</code> ê°±ì‹ ,<br><code>ulib.c</code> ì¤‘ë³µ <code>stat</code> ì œê±° ë“±ìœ¼ë¡œ ì»´íŒŒì¼ ì™„ë£Œ.</p><hr><h4 id="_5-3-3-runtime-error-a-â€”-failure-b-isn-t-a-symlink" tabindex="-1"><a class="header-anchor" href="#_5-3-3-runtime-error-a-â€”-failure-b-isn-t-a-symlink"><span>5.3.3. Runtime error A â€” <code>FAILURE: b isn&#39;t a symlink</code></span></a></h4><ul><li><strong>Cause</strong> : <code>create()</code>ê°€ <code>T_SYMLINK</code>ë¥¼ ë¬´ì‹œí•˜ê³  <code>T_FILE</code>ë¡œ í• ë‹¹.</li><li><strong>Fix</strong> : <code>ialloc(dev, type)</code>ë¡œ íƒ€ì… ê·¸ëŒ€ë¡œ ì „ë‹¬.</li></ul><hr><h4 id="_5-3-4-runtime-error-b-â€”-broken-link-panic" tabindex="-1"><a class="header-anchor" href="#_5-3-4-runtime-error-b-â€”-broken-link-panic"><span>5.3.4. Runtime error B â€” broken link panic</span></a></h4><ul><li><strong>Cause</strong> : <code>sys_open</code>ì´ depth / <code>O_NOFOLLOW</code> ì²´í¬ ì—†ì´ ì¬í•´ì„.</li><li><strong>Fix</strong> : ê¹Šì´ ì¹´ìš´í„°(â‰¤10) ë° <code>O_NOFOLLOW</code> ë¶„ê¸° ì¶”ê°€.</li></ul><hr><h4 id="_5-3-5-runtime-error-c-â€”-concurrent-unlink-panic" tabindex="-1"><a class="header-anchor" href="#_5-3-5-runtime-error-c-â€”-concurrent-unlink-panic"><span>5.3.5. Runtime error C â€” concurrent unlink panic</span></a></h4><ul><li><strong>Cause</strong> : <code>sys_symlink</code>ê°€ write ì¤‘ lock í•´ì œ â†’ race.</li><li><strong>Fix</strong> : <code>writei</code> ì™„ë£Œ í›„ <code>iunlockput</code>; ê° ë‹¨ê³„ <code>log_write</code> í˜¸ì¶œ.</li></ul><h4 id="_5-3-6-result" tabindex="-1"><a class="header-anchor" href="#_5-3-6-result"><span>5.3.6. Result</span></a></h4><p><code>symlinktest</code>ì˜ basicÂ·brokenÂ·loopÂ·concurrent ì‹œë‚˜ë¦¬ì˜¤ ëª¨ë‘ <strong>ok</strong> ì¶œë ¥.</p><h2 id="_6-additional-content" tabindex="-1"><a class="header-anchor" href="#_6-additional-content"><span>6. Additional Content</span></a></h2><h3 id="_6-1-reference-notes-for-cow-large-file-symbolic-link-implementation-in-xv6-riscv" tabindex="-1"><a class="header-anchor" href="#_6-1-reference-notes-for-cow-large-file-symbolic-link-implementation-in-xv6-riscv"><span>6.1. Reference notes for COW / Large file / Symbolic link implementation in xv6-riscv</span></a></h3><ul><li>RISC-Vì—ëŠ” CR0(Write Protect) ë¹„íŠ¸ê°€ ì—†ìœ¼ë¯€ë¡œ, í˜ì´ì§€ë¥¼ read-onlyë¡œ ë§Œë“œëŠ” ì‘ì—…ì€ PTE_W í´ë¦¬ì–´ + TLB flushë¡œë§Œ ì™„ê²°ëœë‹¤.</li><li>double-indirect block êµ¬í˜„ ì‹œ <code>balloc</code>ìœ¼ë¡œ í• ë‹¹ë°›ì€ ë‘ ë²ˆì§¸ ë ˆë²¨ ë¸”ë¡ì„ ë°˜ë“œì‹œ <code>log_write</code> í›„ <code>brelse</code>í•´ì•¼ log ì¼ê´€ì„±ì´ ìœ ì§€ëœë‹¤.</li><li>symlink í•´ì„ì€ <code>namei</code>ì™€ ë™ì¼í•œ ì ê¸ˆ ìˆœì„œë¥¼ ë”°ë¼ì•¼ deadlockì„ í”¼í•  ìˆ˜ ìˆë‹¤. íŠ¹íˆ <code>sys_open</code> ë£¨í”„ ë‚´ë¶€ì—ì„œ <code>ilock(ip)</code> í›„ <code>readi</code>ë¥¼ í˜¸ì¶œí•  ë•Œ log transactionì´ ì—´ë¦° ìƒíƒœì—¬ì•¼ í•œë‹¤.</li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">ìµœê·¼ ìˆ˜ì •: </span><time class="meta-item-info" datetime="2025-06-18T14:48:16.000Z" data-allow-mismatch>25. 6. 18. ì˜¤í›„ 11:48</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: kmbzn24@hanyang.ac.kr">ê¹€ë³‘ì¤€</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><div class="vp-footer-wrapper" data-v-e24f0054><hr data-v-e24f0054><div class="vp-footer" data-v-e24f0054><p class="built-with" data-v-e24f0054>BUILT WITH</p><div class="tech-logos" data-v-e24f0054><a href="https://www.cloudflare.com/" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/cloudflare/cloudflare-original.svg" alt="Cloudflare" data-v-e24f0054></a><a href="https://nodejs.org/" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg" alt="Node.js" data-v-e24f0054></a><a href="https://github.com/kmbzn" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="GitHub" data-v-e24f0054></a><a href="https://git-scm.com/" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg" alt="Git" data-v-e24f0054></a><a href="https://vuejs.org/" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vuejs/vuejs-original.svg" alt="Vue.js" data-v-e24f0054></a><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank" data-v-e24f0054><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JavaScript" data-v-e24f0054></a><a href="https://code.visualstudio.com/" target="_blank" data-v-e24f0054><img src="https://blog.kakaocdn.net/dn/lTWD3/btsMdkdWJqP/b4aSv2aa6c425THE40jKB1/img.png" alt="VSCode" data-v-e24f0054></a><a href="https://www.npmjs.com/" target="_blank" data-v-e24f0054><img src="https://upload.wikimedia.org/wikipedia/commons/d/db/Npm-logo.svg" alt="npm" data-v-e24f0054></a></div><p class="copyright" data-v-e24f0054> All trademarks and logos are property of their respective owners.<br data-v-e24f0054> Â© 2025 kmbzn Â· <a href="https://github.com/kmbzn/blog/blob/master/LICENSE" target="_blank" data-v-e24f0054>MIT License</a><br data-v-e24f0054></p></div></div><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DiAjUdp1.js" defer></script>
  </body>
</html>
